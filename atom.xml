<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Neil&#39;s site</title>
  <icon>https://www.gravatar.com/avatar/124e8e573a49899e984bcaeb9daf2b5e</icon>
  <subtitle>A bird is known by its note, and a man by his talk.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://hero-guo.com/"/>
  <updated>2018-12-02T13:56:17.239Z</updated>
  <id>http://hero-guo.com/</id>
  
  <author>
    <name>Neil Guo</name>
    <email>handsamechina@126.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>åœ¨ React é¡¹ç›®ä¸­ä½¿ç”¨ Redux å’Œ Redux-Saga</title>
    <link href="http://hero-guo.com/2018/12/02/%E5%9C%A8-React-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8-Redux-%E5%92%8C-Redux-Saga/"/>
    <id>http://hero-guo.com/2018/12/02/åœ¨-React-é¡¹ç›®ä¸­ä½¿ç”¨-Redux-å’Œ-Redux-Saga/</id>
    <published>2018-12-02T13:52:32.000Z</published>
    <updated>2018-12-02T13:56:17.239Z</updated>
    
    <content type="html"><![CDATA[<p>å…³äº React çš„æ•°æ®ç®¡ç†åº“ç°åœ¨ç¤¾åŒºæœ‰å¾ˆå¤šè§£å†³æ–¹æ¡ˆï¼Œ<a href="https://mobx.js.org/" target="_blank" rel="noopener">Mobx</a>ï¼Œ<a href="https://redux.js.org/" target="_blank" rel="noopener">Redux</a>ï¼Œ<a href="https://rxjs-dev.firebaseapp.com/" target="_blank" rel="noopener">RxJs</a>ç­‰ã€‚å…³äºä»–ä»¬çš„ä¼˜åŠ£ä¸é€‚åˆçš„åœºæ™¯ç½‘ä¸Šæœ‰å¾ˆå¤šè®¨è®ºã€‚æœ¬æ–‡ä¸»è¦ä»‹ç» Redux ä¸ Redux MiddleWare ã€‚<br><a id="more"></a></p><h5 id="ä½•æ—¶éœ€è¦ä½¿ç”¨-Redux"><a href="#ä½•æ—¶éœ€è¦ä½¿ç”¨-Redux" class="headerlink" title="ä½•æ—¶éœ€è¦ä½¿ç”¨ Redux"></a>ä½•æ—¶éœ€è¦ä½¿ç”¨ Redux</h5><ol><li>å¤šå±‚çº§ç»„ä»¶ä¹‹é—´éœ€è¦å…±äº«æ•°æ®</li><li>åº”ç”¨çŠ¶æ€åµŒå¥—å±‚çº§å¾ˆæ·±</li><li>æœŸæœ›ä½¿ç”¨å•ä¸€æ•°æ®æµ</li></ol><h5 id="Redux-æ ¸å¿ƒæ¦‚å¿µ"><a href="#Redux-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="Redux æ ¸å¿ƒæ¦‚å¿µ"></a>Redux æ ¸å¿ƒæ¦‚å¿µ</h5><p>ä½¿ç”¨æ™®é€šå¯¹è±¡æè¿°åº”ç”¨ç¨‹åºçš„çŠ¶æ€ï¼Œå¼ºåˆ¶å°†çŠ¶æ€çš„æ›´æ”¹æè¿°ä¸ºä¸€ä¸ªæ“ä½œï¼Œæ¯æ¬¡æ“ä½œç”±ä¸€ä¸ªåŠ¨ä½œ <code>action</code> è§¦å‘ã€‚é€šè¿‡ <code>reducer</code> å‡½æ•°å°†åŠ¨ä½œå’ŒçŠ¶æ€è”ç³»èµ·æ¥ã€‚</p><p>Reduxçš„å®ç°æœ‰ä¸‰å¤§åŸºæœ¬åŸåˆ™ï¼š</p><ol><li>å•ä¸€æ•°æ®æº</li><li>State æ˜¯åªè¯»çš„</li><li>ä½¿ç”¨çº¯å‡½æ•°æ¥æ‰§è¡Œä¿®æ”¹</li></ol><h4 id="Redux-ä½¿ç”¨"><a href="#Redux-ä½¿ç”¨" class="headerlink" title="Redux ä½¿ç”¨"></a>Redux ä½¿ç”¨</h4><p>Redux çš„æºç å¾ˆå°‘ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œæ¯”è¾ƒéš¾ç†è§£çš„æ˜¯å®ƒçš„ä¸­é—´ä»¶æ€æƒ³ã€‚</p><p>1.å®‰è£…</p>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save redux react-redux redux-saga</span><br></pre></td></tr></table></figure><p>2.ä½¿ç”¨ <code>create-react-app</code> åˆ›å»ºé¡¹ç›®ä¹‹åï¼Œåˆ›å»º store æ–‡ä»¶å¤¹</p>   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// store æ–‡ä»¶å¤¹</span><br><span class="line">â”œâ”€â”€ index.js</span><br><span class="line">â”œâ”€â”€ middleware</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ index.js</span><br><span class="line">â”œâ”€â”€ reducers</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ index.js</span><br><span class="line">â””â”€â”€ sagas</span><br><span class="line">    â”œâ”€â”€ index.js</span><br></pre></td></tr></table></figure><p>3.åˆ›å»º store</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//store/index.js</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @å¯¼å‡ºå…¨å±€ store åŸºäº redux-sage</span></span><br><span class="line"><span class="comment"> * @format</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// redux-devtools-extension å¯ä»¥åœ¨æµè§ˆå™¨é‡Œé¢æŸ¥çœ‹ store çš„çŠ¶æ€</span></span><br><span class="line"><span class="keyword">import</span> &#123; applyMiddleware, createStore &#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"><span class="keyword">import</span> &#123; composeWithDevTools &#125; <span class="keyword">from</span> <span class="string">'redux-devtools-extension/logOnlyInProduction'</span></span><br><span class="line"><span class="keyword">import</span> &#123; localStore &#125; <span class="keyword">from</span> <span class="string">'helpers'</span> <span class="comment">// localStorage çš„å°è£…</span></span><br><span class="line"><span class="keyword">import</span> &#123; sageMiddleware &#125; <span class="keyword">from</span> <span class="string">'./middleware'</span></span><br><span class="line"><span class="keyword">import</span> rootSaga <span class="keyword">from</span> <span class="string">'./sagas'</span></span><br><span class="line"><span class="keyword">import</span> rootReducer <span class="keyword">from</span> <span class="string">'./reducers'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> middlewares = [sageMiddleware]</span><br><span class="line"><span class="keyword">const</span> composeEnhancers = composeWithDevTools(&#123;</span><br><span class="line">  <span class="comment">// redux-devtools-extension çš„ä¸€äº›é…ç½®ã€‚ä¸€èˆ¬æƒ…å†µä¸éœ€è¦é…ç½®</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// å¦‚æœéœ€è¦ä»æœ¬åœ°è·å–æ•°æ®åŒæ­¥åˆ° store é‡Œé¢</span></span><br><span class="line"><span class="keyword">const</span> xxx = localStore.get(<span class="string">'xxx'</span>) || &#123;&#125; <span class="comment">// è·å–æœ¬åœ°æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> store = createStore(</span><br><span class="line">  rootReducer, <span class="comment">// redux æ•°æ®å¤„ç†å‡½æ•°</span></span><br><span class="line">  xxx, <span class="comment">// åˆå§‹åŒ–æ•°æ®ï¼Œå¯ä»¥ä¸å¡«</span></span><br><span class="line">  composeEnhancers( <span class="comment">// redux ä¸­é—´ä»¶ å¢å¼º redux çš„æ•°æ®å¤„ç†èƒ½åŠ›</span></span><br><span class="line">    applyMiddleware(...middlewares)</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line">store.runSage = sageMiddleware.run</span><br><span class="line">store.runSage(rootSaga) <span class="comment">// åŠ¨æ€åœ°è¿è¡Œ saga</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleChange</span>(<span class="params"></span>) </span>&#123; <span class="comment">// redux è¢«è§¦å‘çš„ç›‘å¬å‡½æ•°</span></span><br><span class="line">  <span class="comment">// å­˜å‚¨ store æ•°æ®åˆ°æœ¬åœ°ç¼“å­˜</span></span><br><span class="line">  <span class="keyword">const</span> state = store.getState() <span class="comment">// è·å–å½“å‰ store é‡Œé¢çš„å…¨éƒ¨æ•°æ®</span></span><br><span class="line">  localStore.set(<span class="string">'xxx'</span>, state) <span class="comment">// å­˜å‚¨åˆ° localStorage</span></span><br><span class="line">&#125;</span><br><span class="line">store.subscribe(handleChange)</span><br><span class="line"><span class="comment">// Enable Webpack hot module replacement for reducers</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">module</span>.hot) &#123; <span class="comment">// webpack çƒ­æ›´æ–°æ—¶å€™åŒæ­¥ redux</span></span><br><span class="line">  <span class="built_in">module</span>.hot.accept(<span class="string">'./reducers'</span>, () =&gt; &#123;</span><br><span class="line">    store.replaceReducer(<span class="built_in">require</span>(<span class="string">'./reducers/index'</span>).default)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure><p>4.åˆ›å»º reducer</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/reducers/index.js</span></span><br><span class="line"><span class="comment">// combineReducers æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ã€‚ä¸»è¦ä½œç”¨æ˜¯åˆå¹¶å¤šä¸ª reducer</span></span><br><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">'redux'</span></span><br><span class="line"><span class="keyword">import</span> todo <span class="keyword">from</span> <span class="string">'./todo'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> combineReducers(&#123; todo &#125;)</span><br></pre></td></tr></table></figure>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/reducers/todo.js</span></span><br><span class="line"><span class="comment">// å®šä¹‰ action</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ADD_TODO_PENDDING = <span class="string">'todo/ADD_TODO_PENDDING'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ADD_TODO_SUCCEEDED = <span class="string">'todo/ADD_TODO_SUCCEEDED'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ADD_TODO_FAILURED = <span class="string">'todo/ADD_TODO_FAILURED'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initialState = &#123; <span class="comment">// ä¼ å…¥åˆå§‹åŒ– state</span></span><br><span class="line">  todos: [],</span><br><span class="line">  loading: <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ ¹æ® action.type å¤„ç† stateï¼Œä¸èƒ½ä¿®æ”¹ stateï¼Œå¯ä»¥ä½¿ç”¨ Object.assing() æˆ–è€… å±•å¼€è¿ç®—ç¬¦ &#123;...state&#125; ç”Ÿæˆä¸€ä¸ªå‰¯æœ¬</span></span><br><span class="line"><span class="comment">// åªè¦ä¼ å…¥å‚æ•°ç›¸åŒï¼Œè¿”å›è®¡ç®—å¾—åˆ°çš„ä¸‹ä¸€ä¸ª state å°±ä¸€å®šç›¸åŒã€‚æ²¡æœ‰ç‰¹æ®Šæƒ…å†µã€æ²¡æœ‰å‰¯ä½œç”¨ï¼Œæ²¡æœ‰ API è¯·æ±‚ã€æ²¡æœ‰å˜é‡ä¿®æ”¹ï¼Œå•çº¯æ‰§è¡Œè®¡ç®—ã€‚</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state = initialState, action = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; payload &#125; = action</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> ADD_TODO_PENDDING:</span><br><span class="line">      <span class="keyword">return</span> &#123; ...state &#125;</span><br><span class="line">    <span class="keyword">case</span> ADD_TODO_SUCCEEDED:</span><br><span class="line">      <span class="keyword">return</span> &#123; ...state, <span class="attr">todos</span>: payload, <span class="attr">loading</span>: <span class="literal">false</span> &#125;</span><br><span class="line">    <span class="keyword">case</span> ADD_TODO_FAILURE:</span><br><span class="line">      <span class="keyword">return</span> &#123; ...state, <span class="attr">loading</span>: <span class="literal">false</span> &#125;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>5.åˆ›å»º sagas</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/sagas/index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; all, fork &#125; <span class="keyword">from</span> <span class="string">'redux-saga/effects'</span></span><br><span class="line"><span class="keyword">import</span> todo <span class="keyword">from</span> <span class="string">'./todo'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>* <span class="title">root</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> all([fork(todo)])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/sagas/todo.js</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actionTypes <span class="keyword">from</span> <span class="string">'../reducers/todo'</span></span><br><span class="line"><span class="keyword">import</span> &#123; $request &#125; <span class="keyword">from</span> <span class="string">'helpers'</span> <span class="comment">// åŸºäº axios å°è£…çš„è¯·æ±‚æ–¹æ³•</span></span><br><span class="line"><span class="keyword">import</span> &#123; call, put &#125; <span class="keyword">from</span> <span class="string">'redux-saga/effects'</span></span><br><span class="line"><span class="keyword">import</span> &#123; takeLatest &#125; <span class="keyword">from</span> <span class="string">'redux-saga'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">addTodo</span>(<span class="params">action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; data &#125; = <span class="keyword">yield</span> call(<span class="function"><span class="params">()</span> =&gt;</span> $request.post(<span class="string">'/addTodo'</span>, action))</span><br><span class="line">    <span class="keyword">yield</span> put(&#123; <span class="attr">type</span>: actionTypes.ADD_TODO_SUCCEEDED, <span class="attr">payload</span>: data &#125;)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">yield</span> put(&#123; <span class="attr">type</span>: actionTypes.ADD_TODO_FAILURED&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>* <span class="title">saga</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span>* takeLatest(actionTypes.ADD_TODO_PENDDING, addTodo)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>6.è¿æ¥ React å’Œ Redux</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/routes</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></span><br><span class="line"><span class="keyword">import</span> &#123; BrowserRouter, Route, Switch &#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></span><br><span class="line"><span class="keyword">import</span> Loadable <span class="keyword">from</span> <span class="string">'react-loadable'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store'</span></span><br><span class="line"><span class="keyword">import</span> &#123; NoMatch, Loading &#125; <span class="keyword">from</span> <span class="string">'components'</span></span><br><span class="line"><span class="keyword">const</span> AddTodo = Loadable(&#123;</span><br><span class="line">  loader: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'./container/AddTodo'</span>),</span><br><span class="line">  loading: Loading</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Routes</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Provider store=&#123;store&#125;&gt; <span class="comment">// ä¼ é€’ store</span></span><br><span class="line">      &lt;BrowserRouter&gt;</span><br><span class="line">        &lt;Switch&gt;</span><br><span class="line">  &lt;Route path=<span class="string">"/"</span> component=&#123;App&#125; /&gt;</span><br><span class="line">          &lt;Route path=<span class="string">"/add"</span> component=&#123;AddTodo&#125; /&gt;</span><br><span class="line">          &lt;Route component=&#123;NoMatch&#125; /&gt;</span><br><span class="line">        &lt;<span class="regexp">/Switch&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>BrowserRouter&gt;</span><br><span class="line">    &lt;<span class="regexp">/Provider&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/index.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./style/antd.less'</span></span><br><span class="line"><span class="keyword">import</span> Routes <span class="keyword">from</span> <span class="string">'./routes'</span></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Routes</span> /&gt;</span>, document.getElementById('root'))</span></span><br></pre></td></tr></table></figure><p>7.è§¦å‘ action</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// container/AddTodo.js</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actionTypes <span class="keyword">from</span> <span class="string">'../store/reducers/todo'</span></span><br><span class="line">@connect(&#123; state =&gt; &#123; <span class="attr">data</span>: state.todo &#125; &#125;)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AddTodo</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    handleAdd = <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// è§¦å‘ redux çš„ action</span></span><br><span class="line">        <span class="keyword">this</span>.props.dispatch(&#123;<span class="attr">type</span>: actionTypes.ADD_TODO_PENDDING, data &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="comment">// çœç•¥å¸ƒå±€å®ç°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Redux-çš„ä¸­é—´ä»¶"><a href="#Redux-çš„ä¸­é—´ä»¶" class="headerlink" title="Redux çš„ä¸­é—´ä»¶"></a>Redux çš„ä¸­é—´ä»¶</h4><p>Redux é‡Œçš„ <code>createStore(reducer, [preloadedState], enhancer)</code> ç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯ä¼ å…¥çš„ä¸­é—´ä»¶ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼Œå¦‚æœä¸ä¼ ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ä¸­é—´ä»¶ã€‚ä¸»è¦çš„ä½œç”¨æ˜¯æä¾› action è¢«å‘èµ·ä¹‹åï¼Œåˆ°è¾¾ reducer ä¹‹å‰çš„æ‰©å±•ç‚¹ã€‚å¯ä»¥è®°å½•æ¯æ¬¡ action è¢«è§¦å‘çš„æ—¥å¿—<code>redux-logger</code>ï¼Œå¯ä»¥æ·»åŠ æµè§ˆå™¨æ‰©å±•<code>redux-devtools-extension</code> ã€‚æˆ‘ä»¬ç»å¸¸æ˜¯ç”¨çš„åŠŸèƒ½æ˜¯å¢å¼º action çš„èƒ½åŠ›ï¼Œå› ä¸º action è¢«å®šä¹‰ä¸ºä¸€ä¸ªå¯¹è±¡ï¼ŒåŸå§‹æƒ…å†µä¸‹åªèƒ½å¤„ç†åŒæ­¥æ“ä½œã€‚é€šè¿‡æ·»åŠ ä¸­é—´ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ é€’ä¸€ä¸ªå‘é€ç½‘ç»œè¯·æ±‚çš„ actionã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// redux thunk</span></span><br><span class="line"><span class="keyword">const</span> thunk = <span class="function"><span class="params">store</span> =&gt;</span> next =&gt; <span class="function"><span class="params">action</span> =&gt;</span></span><br><span class="line">  <span class="keyword">typeof</span> action === <span class="string">'function'</span> ?</span><br><span class="line">    action(store.dispatch, store.getState) :</span><br><span class="line">    next(action)</span><br></pre></td></tr></table></figure><h4 id="Redux-Saga"><a href="#Redux-Saga" class="headerlink" title="Redux-Saga"></a>Redux-Saga</h4><p>Redux çš„å¢å¼º action ä½¿å…¶å…·æœ‰ç½‘ç»œè¯·æ±‚èƒ½åŠ›çš„ä¸­é—´ä»¶æœ‰å¾ˆå¤šç§ <code>redux-thunk</code> <code>redux-promise</code> <code>redux-saga</code> <code>redux-observable</code> ç­‰ã€‚å„æœ‰ä¼˜åŠ£ï¼Œè¿™é‡Œä¸»è¦è®²ä¸€ä¸‹æ¯”è¾ƒæµè¡Œçš„ <code>redux-saga</code>ã€‚</p><p><code>redux-saga</code>æ˜¯ä¸€ä¸ªæ—¨åœ¨å¤„ç†åº”ç”¨ç¨‹åºçš„å‰¯ä½œç”¨ï¼ˆç½‘ç»œè¯·æ±‚ï¼Œç”¨æˆ·äº‹ä»¶ï¼Œæµè§ˆå™¨ç¼“å­˜ç­‰ï¼‰ï¼Œä½¿å…¶æ›´å®¹æ˜“ç®¡ç†ï¼Œæ›´å®¹æ˜“æµ‹è¯•çš„åº“ã€‚ä¸Šé¢çš„ä»£ç é‡Œé¢å·²ç»å±•ç°äº†å®ƒçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸»è¦è®²ä¸€ä¸‹å®ƒçš„åŸºæœ¬åŸç†ã€‚</p><p><code>redux-saga</code> æ˜¯åŸºäº ES6çš„æ–°ç‰¹æ€§ <code>Generators</code> å®ç°çš„ã€‚å®ƒå†…éƒ¨å®ç°äº†å¾ˆå¤šè¾…åŠ©å‡½æ•°ï¼Œè¿™äº›è¾…åŠ©å‡½æ•°ç”¨äºå¤„ç† actionã€‚ å¯¹äºä¸€ä¸ªç½‘ç»œè¯·æ±‚æˆ‘ä»¬é»˜è®¤ä¼šæœ‰ä¸‰ç§çŠ¶æ€ï¼Œç±»ä¼¼äº Promiseï¼Œ<code>PENDDING</code>ï¼Œ<code>FULFILLED</code>ï¼Œ<code>REJECTED</code>ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€æ¬¡å®Œæ•´çš„è¯·æ±‚æˆ‘ä»¬éœ€è¦è®¾ç½®ä¸‰ç§ç±»å‹çš„ actionã€‚</p><p>å¸¸ç”¨çš„ä¸€äº›è¾…åŠ©æ–¹æ³•æœ‰</p><ul><li><code>call(fn, ...args)</code> å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæœŸæœ›è¿”å›ä¸€ä¸ª <code>promise</code>ï¼ŒåŒæ­¥è°ƒç”¨ï¼Œç­‰å¾…è°ƒç”¨çš„è¿”å›</li><li><code>fork(fn, ...args)</code> åŒ <code>call</code> ä½¿ç”¨æ–¹æ³•ç›¸ä¼¼ï¼Œåªæ˜¯å®ƒ<strong>éé˜»å¡è°ƒç”¨</strong> çš„å½¢å¼æ‰§è¡Œ <code>fn</code></li><li><code>put(action)</code> ç±»æ˜¯ä¸ redux çš„ dispatch å‡½æ•°ï¼Œä¸»è¦ä½œç”¨æ˜¯è§¦å‘ä¸€ä¸ª action</li><li><code>take(pattern)</code> æ˜¯æœ€åŸºæœ¬çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå¾ˆå¤šé«˜çº§çš„æ–¹æ³•éƒ½æ˜¯åŸºäºä»–å®ç°çš„ã€‚ä¸»è¦ä½œç”¨æ˜¯åœ¨action è§¦å‘ä¹‹å‰ <code>Generators</code> å‡½æ•°æ˜¯æš‚åœçš„ã€‚</li><li><code>select(selector, ...args)</code> é€‰æ‹©å½“å‰ store é‡Œé¢çš„ state</li><li><code>takeEvery(pattern, saga, ...args)</code>  <code>take</code> çš„é«˜çº§åº”ç”¨ï¼Œç›‘å¬ action çš„è§¦å‘ï¼Œæ¯æ¬¡è§¦å‘éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡<code>pattern</code></li><li><code>takeLatest(pattern, saga, ...args)</code> ä¸ <code>takeEvery</code>ç›¸ä¼¼ï¼Œ æ¯æ¬¡è§¦å‘éƒ½ä¼šæ‰§è¡Œ <code>pattern</code>ï¼Œä½†æ˜¯ä»–ä¼šå–æ¶ˆä¸Šä¸€æ¬¡æ‰§è¡Œä¸­çš„ <code>saga</code></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å…³äº React çš„æ•°æ®ç®¡ç†åº“ç°åœ¨ç¤¾åŒºæœ‰å¾ˆå¤šè§£å†³æ–¹æ¡ˆï¼Œ&lt;a href=&quot;https://mobx.js.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Mobx&lt;/a&gt;ï¼Œ&lt;a href=&quot;https://redux.js.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Redux&lt;/a&gt;ï¼Œ&lt;a href=&quot;https://rxjs-dev.firebaseapp.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;RxJs&lt;/a&gt;ç­‰ã€‚å…³äºä»–ä»¬çš„ä¼˜åŠ£ä¸é€‚åˆçš„åœºæ™¯ç½‘ä¸Šæœ‰å¾ˆå¤šè®¨è®ºã€‚æœ¬æ–‡ä¸»è¦ä»‹ç» Redux ä¸ Redux MiddleWare ã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://hero-guo.com/categories/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://hero-guo.com/tags/JavaScript/"/>
    
      <category term="React" scheme="http://hero-guo.com/tags/React/"/>
    
      <category term="Redux" scheme="http://hero-guo.com/tags/Redux/"/>
    
      <category term="Redux-Saga" scheme="http://hero-guo.com/tags/Redux-Saga/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptäº‹ä»¶å¾ªç¯æ¢ç´¢</title>
    <link href="http://hero-guo.com/2018/07/11/javascript%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E6%8E%A2%E7%B4%A2/"/>
    <id>http://hero-guo.com/2018/07/11/javascriptäº‹ä»¶å¾ªç¯æ¢ç´¢/</id>
    <published>2018-07-11T13:28:57.000Z</published>
    <updated>2018-07-11T15:28:06.687Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€ç›´å¯¹jsçš„äº‹ä»¶å¾ªç¯ä¸æ˜¯å¾ˆæ¸…æ™°ï¼Œæœ€è¿‘çœ‹äº†JavaScriptå¿è€…ç§˜ç±çš„ç¬¬13ç« åï¼Œæœ‰äº†ä¸€äº›æ„Ÿæ‚Ÿï¼Œç‰¹æ­¤æ€»ç»“ä¸€ä¸‹ï¼Œåˆ†äº«ç»™å¤§å®¶ã€‚</p><h3 id="å•çº¿ç¨‹"><a href="#å•çº¿ç¨‹" class="headerlink" title="å•çº¿ç¨‹"></a>å•çº¿ç¨‹</h3><p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒJavaScriptæ˜¯å•çº¿ç¨‹æ‰§è¡Œæ¨¡å‹ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½æ‰§è¡Œä¸€ä¸ªä»£ç ç‰‡æ®µï¼Œä¸€ä¸ªä»»åŠ¡å¼€å§‹åçŸ¥é“è¿è¡Œå®Œæˆï¼Œä¸ä¼šè¢«å…¶ä»–ä»»åŠ¡ä¸­æ–­ã€‚å½“ä¸€ä¸ªä»»åŠ¡èŠ±è´¹çš„æ—¶é—´å¾ˆé•¿çš„è¯ï¼Œç”¨æˆ·å°±ä¼šæ˜æ˜¾çš„æ„Ÿè§‰åˆ°å¡é¡¿ã€‚æµè§ˆå™¨ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜å¼•å…¥äº†äº‹ä»¶å¾ªç¯çš„æ¦‚å¿µï¼ˆEvent Loopï¼‰ã€‚</p><h3 id="äº‹ä»¶å¾ªç¯"><a href="#äº‹ä»¶å¾ªç¯" class="headerlink" title="äº‹ä»¶å¾ªç¯"></a>äº‹ä»¶å¾ªç¯</h3><p>äº‹ä»¶å¾ªç¯å…·æœ‰è‡³å°‘ä¸¤ä¸ªé˜Ÿåˆ—å¤„ç†ä»»åŠ¡ã€‚ä»»åŠ¡åˆ†ä¸ºä¸¤ç±»ï¼Œå®ä»»åŠ¡ï¼ˆmacro-taskï¼‰å’Œå¾®ä»»åŠ¡ï¼ˆmicro-taskï¼‰ã€‚</p><ol><li>å®ä»»åŠ¡ä»£è¡¨ä¸€ä¸ªä¸ªç¦»æ•£ã€ç‹¬ç«‹çš„å·¥ä½œå•å…ƒï¼Œè¿è¡Œå®Œä¹‹åï¼Œæµè§ˆå™¨å¯ä»¥ç»§ç»­å…¶ä»–çš„è°ƒåº¦ã€‚åŒ…æ‹¬ï¼šåˆ›å»ºæ–‡æ¡£å¯¹è±¡ï¼Œè§£æHTMLï¼Œæ‰§è¡ŒJavaScriptï¼Œä»¥åŠå„ç§äº‹ä»¶â€¦â€¦</li><li>å¾®ä»»åŠ¡æ˜¯æ›´å°çš„ä»»åŠ¡ï¼Œä¸»è¦ç”¨æˆ·æ›´æ–°åº”ç”¨ç¨‹åºçš„çŠ¶æ€ï¼Œå¿…é¡»åœ¨æµè§ˆå™¨ä»»åŠ¡ç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ä¹‹å‰æ‰§è¡Œã€‚å¾®ä»»åŠ¡éœ€è¦å°½å¯èƒ½å¿«åœ°é€šè¿‡å¼‚æ­¥æ–¹å¼æ‰§è¡Œï¼ŒåŒæ—¶ä¸èƒ½äº§ç”Ÿå…¨æ–°çš„å¾®ä»»åŠ¡ã€‚åŒ…æ‹¬promiseã€å›è°ƒå‡½æ•°ã€DOMå‘ç”Ÿå˜åŒ–â€¦â€¦</li></ol><h4 id="ä»…åŒ…å«å®ä»»åŠ¡"><a href="#ä»…åŒ…å«å®ä»»åŠ¡" class="headerlink" title="ä»…åŒ…å«å®ä»»åŠ¡"></a>ä»…åŒ…å«å®ä»»åŠ¡</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸»çº¿ç¨‹JavaScriptè¿è¡Œ15ms</span></span><br><span class="line">btn1.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;è¿è¡Œ <span class="number">8</span>ms&#125;, <span class="literal">false</span>);</span><br><span class="line">btn2.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;è¿è¡Œ <span class="number">5</span>ms&#125;, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure><p>â€‹    ç°åœ¨å‡è®¾ä¸»çº¿ç¨‹è¿è¡Œ15msï¼Œ åœ¨ç¬¬5mså•å‡»btn1ï¼Œåœ¨ç¬¬12msçš„æ—¶å€™å•å‡»btn2ã€‚åŸºäºå•çº¿ç¨‹æ‰§è¡Œæ¨¡å‹ï¼Œå•å‡»æŒ‰é’®ä¹‹åä¸ä¼šç«‹å³æ‰§è¡Œå¯¹åº”çš„å¤„ç†å‡½æ•°ï¼Œå› ä¸ºä¸€ä¸ªä»»åŠ¡ä¸€æ—¦å¼€å§‹å°±ä¸ä¼šè¢«å¦ä¸€ä¸ªä»»åŠ¡ä¸­æ–­ã€‚å› æ­¤ï¼Œåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œçš„15msæœŸé—´ï¼ŒæŒ‰é’®çš„å•å‡»å¤„ç†å‡½æ•°æ”¾å…¥é˜Ÿåˆ—ã€‚å½“ä¸»çº¿ç¨‹æ‰§è¡Œå®Œæˆä¹Ÿå°±æ˜¯15msä¹‹åï¼Œç¨‹åºå¼€å§‹å¤„ç†å¾®ä»»åŠ¡ï¼Œå› ä¸ºå½“å‰ä¸å­˜åœ¨å¾®ä»»åŠ¡ï¼Œè·³è¿‡æ­¤æ­¥éª¤ï¼Œå¼€å§‹æ‰§è¡Œæ›´æ–°UIã€‚</p><p>â€‹    ä¹‹åè¿›å…¥ç¬¬äºŒæ¬¡å¾ªç¯ï¼Œä¹Ÿå°±æ˜¯å¼€å§‹æ‰§è¡Œbtn1çš„å¤„ç†å‡½æ•°ï¼Œéœ€è¦è¿è¡Œ8msï¼Œbtn2å¤„ç†å‡½æ•°åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚å½“btn1å¤„ç†å‡½æ•°æ‰§è¡Œå®Œä¹‹åï¼Œæµè§ˆå™¨æ£€æŸ¥å¾®ä»»åŠ¡æ˜¯å¦å­˜åœ¨å’Œæ˜¯å¦æ›´æ–°UIï¼Œåˆ é™¤ä»»åŠ¡é˜Ÿåˆ—é‡Œçš„btn1çš„å¤„ç†å‡½æ•°ã€‚</p><p>â€‹    æœ€åè¿›å…¥ç¬¬ä¸‰æ¬¡å¾ªç¯ï¼Œå¼€å§‹æ‰§è¡Œbtn2çš„å¤„ç†å‡½æ•°ï¼Œéœ€è¦è¿è¡Œ5msï¼Œå¤„ç†å‡½æ•°æ‰§è¡Œå®Œä¹‹åï¼Œæ£€æŸ¥å¾®ä»»åŠ¡å’Œæ˜¯å¦éœ€è¦æ›´æ–°UIï¼Œåˆ é™¤ä»»åŠ¡é˜Ÿåˆ—é‡Œçš„btn2çš„å¤„ç†å‡½æ•°ï¼Œæœ€ç»ˆä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºï¼Œå¾ªç¯ç»“æŸã€‚</p><h4 id="åŒæ—¶å«æœ‰å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡"><a href="#åŒæ—¶å«æœ‰å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡" class="headerlink" title="åŒæ—¶å«æœ‰å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡"></a>åŒæ—¶å«æœ‰å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸»çº¿ç¨‹JavaScriptè¿è¡Œ15ms</span></span><br><span class="line">btn1.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">       è¿è¡Œ <span class="number">4</span>ms </span><br><span class="line">    &#125;);</span><br><span class="line">    è¿è¡Œ <span class="number">8</span>ms </span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line">btn2.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;è¿è¡Œ <span class="number">5</span>ms&#125;, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure><p>æœ¬ä¾‹ä¸­åœ¨btn1çš„äº‹ä»¶å¤„ç†å‡½æ•°é‡Œå¢åŠ äº†ä¸€ä¸ªç«‹å³å…‘ç°çš„Promiseï¼Œéœ€è¦è¿è¡Œ4msã€‚</p><p>ç°åœ¨ä»£ç çš„æ‰§è¡Œé¡ºåºä¸ºï¼š</p><pre><code>1. ä¸»çº¿ç¨‹æ‰§è¡Œ15msï¼Œåœ¨5mså’Œ12msçš„æ—¶å€™åˆ†åˆ«å°†å¤„ç†å‡½æ•°æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ›´æ–°UIã€‚2. 15måå¤„ç†btn1äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå‘ç°Promiseï¼Œæ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œbtn1äº‹ä»¶å¤„ç†å‡½æ•°ç»§ç»­æ‰§è¡Œ8msï¼Œæ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—å‘ç°æœ‰Promiseå›è°ƒå‡½æ•°ï¼Œç„¶åå¼€å§‹æ‰§è¡ŒPromiseå›è°ƒå‡½æ•°ï¼Œè¿è¡Œ4msï¼Œç»§ç»­æ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¦‚æœä¸ºç©ºï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦æ›´æ–°UIï¼Œè¿›å…¥ä¸‹ä¸€è½®å¾ªç¯ã€‚3. å¤„ç†btn2çš„äº‹ä»¶å¤„ç†å‡½æ•°â€¦â€¦</code></pre><h3 id="è®¡æ—¶å™¨"><a href="#è®¡æ—¶å™¨" class="headerlink" title="è®¡æ—¶å™¨"></a>è®¡æ—¶å™¨</h3><p>åŸºäºä¸Šé¢çš„äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€ç§ç‰¹æ®Šç±»å‹çš„äº‹ä»¶ï¼š<em>è®¡æ—¶å™¨</em>ã€‚æµè§ˆå™¨æä¾›äº†ä¸¤ç§åˆ›å»ºè®¡æ—¶å™¨çš„æ–¹æ³• <code>setTimeout</code> å’Œ <code>setInterval</code>ã€‚ ä»–ä»¬éƒ½æŒ‚è½½åœ¨ <code>window</code> å¯¹è±¡ä¸Šã€‚</p><p> <code>setTimeout</code>ï¼šåœ¨æŒ‡å®šçš„å»¶è¿Ÿæ—¶é—´ç»“æŸæ—¶æ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°ï¼Œè¿”å›æ ‡è¯†è®¡æ—¶å™¨çš„å”¯ä¸€å€¼ï¼Œå¯ç”¨äºå–æ¶ˆå®šæ—¶å™¨ï¼ˆ<code>clearTimeout(id)</code>ï¼‰ã€‚</p><p><code>setInterval</code>ï¼šæŒ‰ç…§æŒ‡å®šçš„å»¶è¿Ÿé—´éš”ä¸æ–­çš„æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œè¿”å›æ ‡è¯†è®¡æ—¶å™¨çš„å”¯ä¸€å€¼ï¼Œå¯ç”¨äºå–æ¶ˆå®šæ—¶å™¨ï¼ˆ<code>clearInterval(id)</code>ï¼‰ã€‚</p><h4 id="äº‹ä»¶å¾ªç¯ä¸­çš„å®šæ—¶å™¨"><a href="#äº‹ä»¶å¾ªç¯ä¸­çš„å®šæ—¶å™¨" class="headerlink" title="äº‹ä»¶å¾ªç¯ä¸­çš„å®šæ—¶å™¨"></a>äº‹ä»¶å¾ªç¯ä¸­çš„å®šæ—¶å™¨</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸»çº¿ç¨‹JavaScriptè¿è¡Œ18ms</span></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    è¿è¡Œ<span class="number">6</span>ms;</span><br><span class="line">&#125;, <span class="number">10</span>);</span><br><span class="line">setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    è¿è¡Œ<span class="number">8</span>ms;</span><br><span class="line">&#125;, <span class="number">10</span>);</span><br><span class="line">btn1.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;è¿è¡Œ <span class="number">10</span>ms&#125;, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure><p>ğŸ‘†ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>ç°åœ¨æˆ‘ä»¬æƒ³è±¡ä¸€ä¸‹ä¸»çº¿ç¨‹ä»£ç éœ€è¦è¿è¡Œ18msï¼Œåœ¨ç¬¬6msçš„æ—¶å€™ç”¨æˆ·ç‚¹å‡»äº†æŒ‰é’®ï¼Œåœ¨ç¬¬10mså»¶è¿Ÿè®¡æ—¶å™¨åˆ°æœŸï¼Œé—´éš”è®¡æ—¶å™¨ç¬¬ä¸€æ¬¡è§¦å‘ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªä»»åŠ¡ä¸€æ—¦å¼€å§‹æ‰§è¡Œï¼Œå°±æ— æ³•è¢«å…¶ä»–ä»»åŠ¡ä¸­æ–­ã€‚æ‰€ä»¥ï¼Œ6mså°†äº‹ä»¶å¤„ç†å‡½æ•°åŠ å…¥é˜Ÿåˆ—ï¼Œ10msåˆ†åˆ«å°†å»¶è¿Ÿè®¡æ—¶å™¨å’Œé—´éš”è®¡æ—¶å™¨å›è°ƒæ”¾å…¥é˜Ÿåˆ—ã€‚è¿è¡Œåˆ°18mä¸»çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œæ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—å’Œæ›´æ–°UIï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªæ—¶é—´å¾ªç¯ã€‚å¼€å§‹æ‰§è¡Œbtn1äº‹ä»¶å›è°ƒï¼Œè¿è¡Œ10msï¼Œè¿™æ—¶å€™åœ¨btn1äº‹ä»¶å›è°ƒè¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œ<em>é—´éš”è®¡æ—¶å™¨ç¬¬äºŒæ¬¡åˆ°æœŸï¼Œä½†æ˜¯ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢å·²ç»æœ‰ä¸€ä¸ªé—´éš”è®¡æ—¶å™¨å¤„ç†å‡½æ•°</em>ï¼Œæ‰€ä»¥å¿½ç•¥è¿™ä¸ªå¤„ç†å‡½æ•°ã€‚btn1äº‹ä»¶å›è°ƒè¿è¡Œç»“æŸï¼Œæ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—å’Œæ›´æ–°UIï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯ã€‚å¼€å§‹æ‰§è¡Œå»¶è¿Ÿè®¡æ—¶å™¨å¤„ç†å‡½æ•°ï¼Œè¿è¡Œ6msï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­é—´éš”è®¡æ—¶å™¨ç¬¬ä¸‰æ¬¡åˆ°æœŸï¼Œä½†æ˜¯ç”±äºä»»åŠ¡é˜Ÿåˆ—å·²ç»æœ‰äº†å¤„ç†å‡½æ•°ï¼Œç»§ç»­å¿½ç•¥ã€‚å»¶è¿Ÿè®¡æ—¶å™¨å¤„ç†å‡½æ•°è¿è¡Œå®Œæ¯•ï¼Œæ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—å’Œæ›´æ–°UIï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯ã€‚ç°åœ¨å¼€å§‹æ‰§è¡Œé—´éš”è®¡æ—¶å™¨å¤„ç†å‡½æ•°ï¼Œè¿è¡Œ8msï¼Œåœ¨è¿™æœŸé—´é—´éš”è®¡æ—¶å™¨ç¬¬å››æ¬¡åˆ°æœŸï¼Œè¿™æ—¶å€™ä»»åŠ¡é˜Ÿåˆ—é‡Œæ²¡æœ‰å¤„ç†å‡½æ•°ï¼Œæ‰€ä»¥å°†è¿™æ¬¡çš„å¤„ç†å‡½æ•°æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œé—´éš”å®šæ—¶å™¨å¤„ç†å‡½æ•°è¿è¡Œå®Œæˆï¼Œæ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—å’Œæ›´æ–°UIï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯ï¼Œç„¶åé‡å¤è¿è¡Œé—´éš”å®šæ—¶å™¨â€¦â€¦</p><p>é€šè¿‡ä»¥ä¸Šçš„æ‰§è¡Œè¿‡ç¨‹æˆ‘ä»¬å‘ç°ï¼Œ<strong>æˆ‘ä»¬åªèƒ½æ§åˆ¶è®¡æ—¶å™¨ä½•æ—¶è¢«åŠ å…¥é˜Ÿåˆ—ï¼Œè€Œæ— æ³•æ§åˆ¶ä½•æ—¶æ‰§è¡Œã€‚</strong></p><p>æœ€åï¼ŒJavaScriptçš„äº‹ä»¶å¾ªç¯æ˜¯è¿™é—¨è¯­è¨€éå¸¸é‡è¦çš„åŸºç¡€ï¼Œç”±äºæˆ‘æ°´å¹³æœ‰é™ä»¥ä¸Šåªæ˜¯ç®€å•æ€»ç»“äº†ä¸€ä¸‹å®ƒçš„æ‰§è¡Œè¿‡ç¨‹ã€‚å¤§å®¶å¯ä»¥æ·±å…¥ç ”ç©¶ä¸€ä¸‹<a href="https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/" target="_blank" rel="noopener">Nodejsçš„äº‹ä»¶å¾ªç¯</a></p><p>â€‹    </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä¸€ç›´å¯¹jsçš„äº‹ä»¶å¾ªç¯ä¸æ˜¯å¾ˆæ¸…æ™°ï¼Œæœ€è¿‘çœ‹äº†JavaScriptå¿è€…ç§˜ç±çš„ç¬¬13ç« åï¼Œæœ‰äº†ä¸€äº›æ„Ÿæ‚Ÿï¼Œç‰¹æ­¤æ€»ç»“ä¸€ä¸‹ï¼Œåˆ†äº«ç»™å¤§å®¶ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å•çº¿ç¨‹&quot;&gt;&lt;a href=&quot;#å•çº¿ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;å•çº¿ç¨‹&quot;&gt;&lt;/a&gt;å•çº¿ç¨‹&lt;/h3&gt;
      
    
    </summary>
    
      <category term="JavaScript" scheme="http://hero-guo.com/categories/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://hero-guo.com/tags/JavaScript/"/>
    
      <category term="äº‹ä»¶å¾ªç¯" scheme="http://hero-guo.com/tags/%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/"/>
    
  </entry>
  
  <entry>
    <title>æ‰©å±•åŸç”ŸNumber</title>
    <link href="http://hero-guo.com/2018/02/05/%E6%89%A9%E5%B1%95%E5%8E%9F%E7%94%9FNumber/"/>
    <id>http://hero-guo.com/2018/02/05/æ‰©å±•åŸç”ŸNumber/</id>
    <published>2018-02-05T14:46:27.000Z</published>
    <updated>2018-02-05T14:52:50.457Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©çœ‹<a href="https://github.com/getify/You-Dont-Know-JS/blob/master/es6%20%26%20beyond/ch3.md" target="_blank" rel="noopener"><strong>ä½ ä¸çŸ¥é“çš„js</strong></a> ç¬¬ä¸‰ç« æœ‰ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„æ–¹æ³•ï¼Œç‰¹è®°å½•ä¸€ä¸‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="built_in">Number</span>.prototype[<span class="built_in">Symbol</span>.iterator]) &#123;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(</span><br><span class="line"><span class="built_in">Number</span>.prototype,</span><br><span class="line"><span class="built_in">Symbol</span>.iterator,</span><br><span class="line">&#123;</span><br><span class="line">writable: <span class="literal">true</span>,</span><br><span class="line">configurable: <span class="literal">true</span>,</span><br><span class="line">enumerable: <span class="literal">false</span>,</span><br><span class="line">value: <span class="function"><span class="keyword">function</span> <span class="title">iterator</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> i, inc, done = <span class="literal">false</span>, top = +<span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// iterate positively or negatively?</span></span><br><span class="line">inc = <span class="number">1</span> * (top &lt; <span class="number">0</span> ? <span class="number">-1</span> : <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line"><span class="comment">// make the iterator itself an iterable!</span></span><br><span class="line">[<span class="built_in">Symbol</span>.iterator]()&#123; <span class="keyword">return</span> <span class="keyword">this</span>; &#125;,</span><br><span class="line"></span><br><span class="line">next() &#123;</span><br><span class="line"><span class="keyword">if</span> (!done) &#123;</span><br><span class="line"><span class="comment">// initial iteration always 0</span></span><br><span class="line"><span class="keyword">if</span> (i == <span class="literal">null</span>) &#123;</span><br><span class="line">i = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// iterating positively</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (top &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">i = <span class="built_in">Math</span>.min(top,i + inc);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// iterating negatively</span></span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">i = <span class="built_in">Math</span>.max(top,i + inc);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// done after this iteration?</span></span><br><span class="line"><span class="keyword">if</span> (i == top) done = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &#123; <span class="attr">value</span>: i, <span class="attr">done</span>: <span class="literal">false</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> &#123; <span class="attr">done</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">of</span> <span class="number">3</span>) &#123;</span><br><span class="line"><span class="built_in">console</span>.log( i );</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0 1 2 3</span></span><br><span class="line"></span><br><span class="line">[...<span class="number">-3</span>];<span class="comment">// [0,-1,-2,-3]</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä»Šå¤©çœ‹&lt;a href=&quot;https://github.com/getify/You-Dont-Know-JS/blob/master/es6%20%26%20beyond/ch3.md&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;ä½ ä¸çŸ¥é“
      
    
    </summary>
    
      <category term="Notes" scheme="http://hero-guo.com/categories/Notes/"/>
    
    
      <category term="JavaScript" scheme="http://hero-guo.com/tags/JavaScript/"/>
    
      <category term="ES6" scheme="http://hero-guo.com/tags/ES6/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨commitlintè§„èŒƒgitæäº¤</title>
    <link href="http://hero-guo.com/2018/02/05/%E4%BD%BF%E7%94%A8commitlint%E8%A7%84%E8%8C%83git%E6%8F%90%E4%BA%A4/"/>
    <id>http://hero-guo.com/2018/02/05/ä½¿ç”¨commitlintè§„èŒƒgitæäº¤/</id>
    <published>2018-02-05T14:06:11.000Z</published>
    <updated>2018-02-05T14:13:28.413Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://marionebl.github.io/commitlint/" target="_blank" rel="noopener">commitlint</a>: git æäº¤ä¿¡æ¯è§„èŒƒä¸éªŒè¯</p><p><a href="https://github.com/typicode/husky/tree/master" target="_blank" rel="noopener">husky</a>: ä½¿ghookæ›´å®¹æ˜“</p><p><a href="https://github.com/conventional-changelog/standard-version" target="_blank" rel="noopener">standard-version</a>: è‡ªåŠ¨ç”ŸæˆCHANGELOG å¹¶å‘å¸ƒç‰ˆæœ¬</p><p>å®‰è£…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev @commitlint/&#123;config-conventional,cli&#125;</span><br><span class="line">npm i --save-dev standard-version</span><br><span class="line">npm install husky --save-dev</span><br></pre></td></tr></table></figure><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><ol><li>commitlint</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;module.exports = &#123;extends: [&apos;@commitlint/config-conventional&apos;]&#125;&quot; &gt; commitlint.config.js</span><br><span class="line">// commitlint.config.js</span><br><span class="line"> module.exports = &#123;</span><br><span class="line">  extends: [&apos;@commitlint/config-conventional&apos;],</span><br><span class="line">  rules: &#123;</span><br><span class="line">  &apos;type-enum&apos;: [2, &apos;always&apos;, [</span><br><span class="line">     &quot;feat&quot;, &quot;fix&quot;, &quot;docs&quot;, &quot;style&quot;, &quot;refactor&quot;, &quot;perf&quot;, &quot;test&quot;, &quot;build&quot;, &quot;ci&quot;, &quot;chore&quot;, &quot;revert&quot;</span><br><span class="line">   ]],</span><br><span class="line">  &apos;scope-empty&apos;: [2, &apos;never&apos;],</span><br><span class="line">  &apos;subject-full-stop&apos;: [0, &apos;never&apos;], </span><br><span class="line">  &apos;subject-case&apos;: [0, &apos;never&apos;]</span><br><span class="line">  &#125;&#125;;</span><br></pre></td></tr></table></figure><ol><li>tandard-version å’Œ husky</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// package.json</span><br><span class="line"> &quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;lint&quot;: &quot;eslint .&quot;,</span><br><span class="line">  &quot;commitmsg&quot;: &quot;commitlint -e $GIT_PARAMS&quot;,</span><br><span class="line">  &quot;release&quot;: &quot;standard-version&quot;,</span><br><span class="line">  &quot;validate&quot;: &quot;npm prune&quot;,</span><br><span class="line">  &quot;pre-commit&quot;: &quot;npm run lint&quot;,</span><br><span class="line">  &quot;pre-push&quot;: &quot;npm run validate&quot;,</span><br><span class="line">  &quot;npmi&quot;: &quot;npm i&quot;,</span><br><span class="line">  &quot;post-merge&quot;: &quot;npm run npmi&quot;,</span><br><span class="line">  &quot;post-rewrite&quot;: &quot;npm run npmi&quot;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://marionebl.github.io/commitlint/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;commitlint&lt;/a&gt;: git æäº¤ä¿¡æ¯è§„èŒƒä¸éªŒè¯&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://git
      
    
    </summary>
    
      <category term="Notes" scheme="http://hero-guo.com/categories/Notes/"/>
    
    
      <category term="JavaScript" scheme="http://hero-guo.com/tags/JavaScript/"/>
    
      <category term="git" scheme="http://hero-guo.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯å‘å±•å²</title>
    <link href="http://hero-guo.com/2017/12/17/%E5%89%8D%E7%AB%AF%E5%8F%91%E5%B1%95%E5%8F%B2/"/>
    <id>http://hero-guo.com/2017/12/17/å‰ç«¯å‘å±•å²/</id>
    <published>2017-12-17T07:04:20.000Z</published>
    <updated>2017-12-17T06:38:50.667Z</updated>
    
    <content type="html"><![CDATA[<h5 id="ä»€ä¹ˆæ˜¯å‰ç«¯"><a href="#ä»€ä¹ˆæ˜¯å‰ç«¯" class="headerlink" title="ä»€ä¹ˆæ˜¯å‰ç«¯"></a>ä»€ä¹ˆæ˜¯å‰ç«¯</h5><p>å‰ç«¯å·¥ç¨‹å¸ˆä¸»è¦åˆ©ç”¨HMTLä¸CSSæ„å»ºé¡µé¢ï¼Œç”¨JavaScriptå®Œå–„äº¤äº’ä»¥åŠç”¨æˆ·ä½“éªŒã€‚</p><h4 id="è¯ç”Ÿ"><a href="#è¯ç”Ÿ" class="headerlink" title="è¯ç”Ÿ"></a>è¯ç”Ÿ</h4><blockquote><p>1994å¹´å¯ä»¥çœ‹åšå‰ç«¯å†å²çš„èµ·ç‚¹ï¼Œè¿™ä¸€å¹´10æœˆ13æ—¥ç½‘æ™¯æ¨å‡ºäº†ç¬¬ä¸€ç‰ˆNavigatorï¼›è¿™ä¸€å¹´ï¼ŒTim Berners-Leeåˆ›å»ºäº†W3Cï¼›è¿™ä¸€å¹´ï¼ŒTimçš„åŸºå‹å‘å¸ƒäº†CSSï¼ˆå±‚å æ ·å¼è¡¨ï¼‰ã€‚1995å¹´ï¼Œå½“æ—¶åœ¨<a href="https://zh.wikipedia.org/wiki/%E7%BD%91%E6%99%AF%E5%85%AC%E5%8F%B8" target="_blank" rel="noopener">ç½‘æ™¯å…¬å¸</a>å°±èŒçš„<a href="https://zh.wikipedia.org/wiki/%E5%B8%83%E8%98%AD%E7%99%BB%C2%B7%E8%89%BE%E5%85%8B" target="_blank" rel="noopener">å¸ƒå…°ç™»Â·è‰¾å…‹</a>æ­£ä¸º<a href="https://zh.wikipedia.org/wiki/%E7%BD%91%E6%99%AF%E5%AF%BC%E8%88%AA%E8%80%85" target="_blank" rel="noopener">Netscape Navigator</a> 2.0æµè§ˆå™¨å¼€å‘çš„ä¸€é—¨åä¸ºLiveScriptçš„è„šæœ¬è¯­è¨€ï¼Œåæ¥ç½‘æ™¯å…¬å¸ä¸<a href="https://zh.wikipedia.org/wiki/%E6%98%87%E9%99%BD%E9%9B%BB%E8%85%A6" target="_blank" rel="noopener">æ˜‡é˜³</a>ç”µè„‘å…¬å¸ç»„æˆçš„å¼€å‘è”ç›Ÿä¸ºäº†è®©è¿™é—¨è¯­è¨€æ­ä¸Š<a href="https://zh.wikipedia.org/wiki/Java" target="_blank" rel="noopener">java</a>è¿™ä¸ªç¼–ç¨‹è¯­è¨€â€œçƒ­è¯â€ï¼Œå°†å…¶ä¸´æ—¶æ”¹åä¸ºâ€œJavaScriptâ€ï¼Œæ—¥åè¿™æˆä¸ºå¤§ä¼—å¯¹è¿™é—¨è¯­è¨€æœ‰è¯¸å¤šè¯¯è§£çš„åŸå› ä¹‹ä¸€ã€‚</p><p>ä¸‡ç»´ç½‘ï¼ˆWWWï¼‰æ˜¯æ¬§æ´²æ ¸å­ç ”ç©¶ç»„ç»‡çš„ä¸€å¸®ç§‘å­¦å®¶ä¸ºäº†æ–¹ä¾¿çœ‹æ–‡æ¡£ã€ä¼ è®ºæ–‡è€Œåˆ›é€ çš„ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆWebç½‘é¡µéƒ½åŸºäºDocumentã€‚Documentå°±æ˜¯ç”¨æ ‡è®°è¯­è¨€+è¶…é“¾æ¥å†™æˆçš„ç”±æ–‡å­—å’Œå›¾ç‰‡æ„æˆçš„HTMLé¡µé¢ï¼Œè¿™æ ·çš„åŠŸèƒ½å·²ç»å®Œå…¨æ»¡è¶³å­¦æœ¯äº¤æµçš„éœ€è¦ï¼Œæ‰€ä»¥ç½‘é¡µçš„æ—©æœŸå½¢æ€å’ŒDocumentä¸€æ ·ï¼Œå®Œå…¨åŸºäºHTMLé¡µé¢ï¼Œå¹¶ä¸”æ‰€æœ‰å†…å®¹éƒ½æ˜¯é™æ€çš„ã€‚</p><p>1999å¹´W3Cå‘å¸ƒç¬¬å››ä»£HTMLæ ‡å‡†ï¼ŒåŒå¹´å¾®è½¯æ¨å‡ºç”¨äºå¼‚æ­¥æ•°æ®ä¼ è¾“çš„ActiveXï¼Œéšå³å„å¤§æµè§ˆå™¨å‚å•†æ¨¡ä»¿å®ç°äº†XMLHttpRequestã€‚è¿™æ ‡è¯†ç€Ajaxçš„è¯ç”Ÿï¼Œä½†æ˜¯Ajaxè¿™ä¸ªè¯æ˜¯åœ¨å…­å¹´åé—®ä¸–çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨è°·æ­Œä½¿ç”¨AjaxæŠ€æœ¯æ‰“é€ äº†Gmailå’Œè°·æ­Œåœ°å›¾ä¹‹åï¼ŒAjaxè·å¾—äº†å·¨å¤§çš„å…³æ³¨ã€‚Ajaxæ˜¯Webç½‘é¡µè¿ˆå‘Webåº”ç”¨çš„å…³é”®æŠ€æœ¯ï¼Œå®ƒæ ‡è¯†ç€Web2.0æ—¶ä»£çš„åˆ°æ¥ã€‚</p><p>2006å¹´ï¼ŒXMLHttpRequestè¢«W3Cæ­£å¼çº³å…¥æ ‡å‡†ã€‚</p><p>è‡³æ­¤ï¼Œæ—©æœŸçš„Documentç»ˆäºè¿›åŒ–ä¸ºäº†Web pageï¼Œä¸Šè¿°ä¸‰ä¸ªå±€é™éƒ½å¾—åˆ°äº†å¦¥å–„çš„è§£å†³ã€‚</p></blockquote><h4 id="è¿œå¤æ—¶ä»£ï¼ˆweb-1-0ï¼‰"><a href="#è¿œå¤æ—¶ä»£ï¼ˆweb-1-0ï¼‰" class="headerlink" title="è¿œå¤æ—¶ä»£ï¼ˆweb 1.0ï¼‰"></a>è¿œå¤æ—¶ä»£ï¼ˆweb 1.0ï¼‰</h4><p>é‚£æ—¶å€™çš„webå¼€å‘è¿˜å±äºçº¯é™æ€å¼€å‘ã€‚å¼€å‘è€…åœ¨webæœåŠ¡å™¨çš„æŒ‡å®šæ–‡ä»¶å¤¹(/www)ä¸‹ï¼Œæ”¾ç½®ä¸€ä¸‹htmlæ–‡ä»¶ï¼Œå½“æµè§ˆå™¨è¯·æ±‚çš„é¡µé¢çš„æ—¶å€™è¿”å›ç›¸åº”çš„htmlæ–‡ä»¶ã€‚</p><p><img src="http://ww1.sinaimg.cn/large/63918611gw1e7ehutyrrnj20hz076dg8.jpg" alt=""></p><p>ä½†æ˜¯ï¼Œæ¸æ¸çš„çº¯é™æ€çš„é¡µé¢ä¸è¶³ä»¥æ»¡è¶³äº§å“çš„å‘å±•éœ€æ±‚ï¼ˆä¾‹å¦‚ï¼šç»Ÿè®¡è¯¥ç½‘ç«™çš„è®¿é—®æµé‡ï¼Œæäº¤ç”¨æˆ·çš„è¾“å…¥ä¿¡æ¯ï¼‰ã€‚è¿™æ—¶å€™ï¼Œå¤§çº¦2005å¹´å·¦å³ï¼Œå‡ºç°äº†Java Server Pages(JSP)ï¼Œå¾®è½¯çš„ASPï¼Œä»¥åŠAjaxï¼ä½ å¯ä»¥åŸºäºjspå’ŒAjaxå¿«é€Ÿæ„å»ºä¸€ä¸ªå¯ä¼¸ç¼©å¹¶ä¸”å®‰å…¨çš„åº”ç”¨ç¨‹åºã€‚</p><p><img src="https://github-camo.global.ssl.fastly.net/d0098546c9fa01b443c16ff1953c90aa9056955b/687474703a2f2f696d672e68622e616963646e2e636f6d2f3932393766646337336438336632373764343439633932313933613361663432386464633064343431316366392d6e31445936465f6677363538" alt=""></p><h4 id="çŸ³å™¨æ—¶ä»£-web-2-0"><a href="#çŸ³å™¨æ—¶ä»£-web-2-0" class="headerlink" title="çŸ³å™¨æ—¶ä»£ (web 2.0)"></a>çŸ³å™¨æ—¶ä»£ (web 2.0)</h4><p>å› ä¸ºå½“æ—¶æµè§ˆå™¨å‚å•†çš„æ··ä¹±ï¼ˆä¾‹å¦‚ï¼šie, chrome, firefoxç­‰ï¼‰ï¼Œæ‹¥æœ‰ä¸åŒå†…æ ¸çš„æµè§ˆå™¨Trident(IEå†…æ ¸)ï¼ŒGecko(Firefox å†…æ ¸)ï¼Œwebkitï¼ˆSafari å†…æ¶µï¼‰, Chromium/Blinkï¼ˆChromeå†…æ ¸ï¼‰ï¼ŒPrestoï¼ˆOperaå†…æ ¸ï¼‰ç­‰ã€‚å½“æ—¶çš„æµè§ˆå™¨å‚å•†çš„æ ‡å‡†éƒ½ä¸ä¸€æ ·ã€‚æ¯”å¦‚å†™ä¸€ä¸ªç‚¹å‡»äº‹ä»¶éœ€è¦åšä¸€äº›å…¼å®¹æ€§å¤„ç†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> e = e || <span class="built_in">window</span>.event <span class="comment">//å¤„ç†ieæµè§ˆå™¨å’Œå…¶ä»–æµè§ˆå™¨ä¹‹é—´çš„äº‹ä»¶å…¼å®¹é—®é¢˜</span></span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™ä¸ºäº†å¤„ç†æµè§ˆå™¨çš„å…¼å®¹æ€§ï¼Œå‡ºç°äº†YUI å’Œ jQuery, ä¸»è¦è§£å†³äº†DOMå…ƒç´ é€‰æ‹©ï¼ŒCSSæ“çºµï¼Œäº‹ä»¶ç³»ç»Ÿå¤„ç†ã€‚åŒæ—¶ä¹Ÿå¯ä»¥å…¼é¡¾ä¸€ä¸‹åŠ¨ç”»æ•ˆæœçš„å®ç°å’Œä¸€äº›å¸¸ç”¨æ’ä»¶çš„å°è£…ï¼ˆè¡¨å•éªŒè¯ï¼Œæ—¥å†æ’ä»¶ç­‰ï¼‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//jQuery</span></span><br><span class="line">$(<span class="string">"p.surprise"</span>).addClass(<span class="string">"ohmy"</span>).show(<span class="string">"slow"</span>);</span><br><span class="line">$(<span class="string">"p.surprise"</span>).on(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(e.target);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//YUI</span></span><br><span class="line">YUI().use(<span class="string">'node'</span>, <span class="string">'event'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">Y</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// The Node and Event modules are loaded and ready to use.</span></span><br><span class="line">  <span class="comment">// Your code goes here!</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="æ¨¡å—åŒ–æ—¶ä»£"><a href="#æ¨¡å—åŒ–æ—¶ä»£" class="headerlink" title="æ¨¡å—åŒ–æ—¶ä»£"></a>æ¨¡å—åŒ–æ—¶ä»£</h4><p>æœ€å¼€å§‹JavaScriptæ‰¿æ‹…çš„ä»»åŠ¡é‡å¹¶ä¸å¤šï¼Œè¡¨å•éªŒè¯åŸºæœ¬ä¸Šå°±æ˜¯ä»–çš„å…¨éƒ¨ï¼Œæœ€å¤šå°±æ˜¯ç®€çŸ­çš„å‰ç«¯äº¤äº’ï¼Œè¿™ä¸ªæ—¶æœŸJavaScriptç»„ç»‡ç»“æ„éå¸¸å‡Œä¹±ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯åç«¯é¡ºæ‰‹ä»£åŠ³ï¼Œé‚£æ—¶å€™è¿˜æ²¡æœ‰â€œå‰ç«¯â€è¿™ä¸€èŒä½ã€‚ ä¸€èˆ¬éƒ½æ˜¯å†™åˆ°ä¸€ä¸ªæ–‡ä»¶æˆ–è€…ç›´æ¥å†™åˆ°jspã€aspçš„åç«¯æ¨¡æ¿é¡µé¢ä¸Šå°±å®Œäº‹äº†ã€‚éšç€ajaxçš„æµè¡Œï¼Œå‰ç«¯èƒ½åšçš„ä¸œè¥¿ä¸€å¤œä¹‹é—´æš´æ¶¨ï¼Œä»£ç é‡é£é€Ÿå¢åŠ ï¼Œå•æ–‡ä»¶ç»´æŠ¤ä»£ç å·²ç»å¤ªæ²‰é‡ï¼Œå¤šäººå¼€å‘å…¨å±€å˜é‡æ³›æ»¥ï¼Œä»£ç åˆå¹¶å¼•èµ·å†²çªè¦†ç›–ç­‰é—®é¢˜ã€‚æœ€å¼€å§‹çš„è§£å†³çš„æ–¹å¼æ˜¯ç”¨åŒ¿åå‡½æ•°åŒ…è£¹è‡ªå·±çš„ä»£ç ï¼Œè¿™æ ·å°±ä¸ä¼šæŠŠå®šä¹‰çš„å˜é‡æš´éœ²åˆ°å…¨å±€ä½œç”¨åŸŸé‡Œé¢ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç«‹å³æ‰§è¡Œå‡½æ•°å†™æ³•ã€€</span></span><br><span class="line"><span class="keyword">var</span> module1 = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> m1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//ä¸šåŠ¡ä»£ç </span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    m1 : m1</span><br><span class="line">  &#125;;</span><br><span class="line"> &#125;)();</span><br><span class="line"><span class="comment">//å¯ä»¥ä¼ å…¥å‚æ•°</span></span><br><span class="line"><span class="keyword">var</span> module1 = (<span class="function"><span class="keyword">function</span> (<span class="params">$, undefined</span>) </span>&#123;</span><br><span class="line">ã€€ã€€<span class="comment">//ä¸šåŠ¡ä»£ç </span></span><br><span class="line">&#125;)(jQuery);</span><br><span class="line"><span class="comment">//å‘½åç©ºé—´æ–¹å¼</span></span><br><span class="line"><span class="keyword">var</span> namespace = &#123;&#125;;</span><br><span class="line">namespace.xxx = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;...&#125;</span><br></pre></td></tr></table></figure><p>éšç€ç½‘ç«™é€æ¸çš„å‘å±•ï¼ŒåµŒå…¥ç½‘é¡µçš„Javascriptä»£ç è¶Šæ¥è¶Šåºå¤§ï¼Œè€Œç½‘é¡µè¶Šæ¥è¶Šåƒæ¡Œé¢ç¨‹åºï¼Œéœ€è¦ä¸€ä¸ªå›¢é˜Ÿå»åˆ†å·¥åä½œï¼Œè¿›è¡Œç®¡ç†å’Œæµ‹è¯•ç­‰ç­‰ï¼Œä¸ºäº†æ›´å¥½çš„ç®¡ç†ç½‘é¡µçš„ä¸šåŠ¡é€»è¾‘ï¼Œå¤„ç†ä»£ç ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œäº§ç”Ÿäº†æ¨¡å—åŒ–ç¼–ç¨‹çš„ç†å¿µã€‚</p><p>2008å¹´9æœˆ2æ—¥ï¼ŒGoogleä¸ºæ——ä¸‹æµè§ˆå™¨ChromeåŠ å…¥äº†V8 JavaScriptå¤„ç†å¼•æ“ï¼Œå¯ä»¥æ›´å¿«é€Ÿï¼Œæ›´ç¨³å®šï¼Œæ›´å®‰å…¨çš„å¤„ç†JavaScriptä»£ç ã€‚2009å¹´ï¼ŒRyan Dahlç»“åˆGoogleçš„ V8å¼•æ“ã€äº‹ä»¶é©±åŠ¨æ¨¡å¼ã€ä½çº§I\Oæ¥å£å¼€å‘äº†Node.jsã€‚</p><p>2010å¹´1æœˆï¼Œä¸€æ¬¾åä¸ºâ€™npmâ€˜çš„è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿè¯ç”Ÿï¼Œéšä¹‹è€Œæ¥çš„è¿˜æœ‰<a href="http://javascript.ruanyifeng.com/nodejs/module.html" target="_blank" rel="noopener">commonJS è§„èŒƒ</a>ã€‚</p><blockquote><ol><li>æ¨¡å—çš„æ ‡è¯†åº”éµå¾ªçš„è§„åˆ™ï¼ˆä¹¦å†™è§„èŒƒï¼‰</li><li>å®šä¹‰å…¨å±€å‡½æ•°requireï¼Œé€šè¿‡ä¼ å…¥æ¨¡å—æ ‡è¯†æ¥å¼•å…¥å…¶ä»–æ¨¡å—ï¼Œæ‰§è¡Œçš„ç»“æœå³ä¸ºåˆ«çš„æ¨¡å—æš´æ¼å‡ºæ¥çš„API</li><li>å¦‚æœè¢«requireå‡½æ•°å¼•å…¥çš„æ¨¡å—ä¸­ä¹ŸåŒ…å«ä¾èµ–ï¼Œé‚£ä¹ˆä¾æ¬¡åŠ è½½è¿™äº›ä¾èµ–</li><li>å¦‚æœå¼•å…¥æ¨¡å—å¤±è´¥ï¼Œé‚£ä¹ˆrequireå‡½æ•°åº”è¯¥æŠ¥ä¸€ä¸ªå¼‚å¸¸</li><li>æ¨¡å—é€šè¿‡å˜é‡exportsæ¥å‘å¾€æš´æ¼APIï¼Œexportsåªèƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæš´æ¼çš„APIé¡»ä½œä¸ºæ­¤å¯¹è±¡çš„å±æ€§ã€‚</li></ol></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//math.js</span></span><br><span class="line">exports.add = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> sum = <span class="number">0</span>, i = <span class="number">0</span>, args = <span class="built_in">arguments</span>, l = args.length;</span><br><span class="line">  <span class="keyword">while</span> (i &lt; l) &#123;</span><br><span class="line">      sum += args[i++];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> sum;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//add.js</span></span><br><span class="line"><span class="keyword">var</span> add = <span class="built_in">require</span>(<span class="string">'math'</span>).add;</span><br><span class="line">add(val, <span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯Node.jsä¸»è¦æ˜¯ç”¨äºæœåŠ¡å™¨ç«¯ï¼Œæ— æ³•ç›´æ¥ç”¨åœ¨æµè§ˆå™¨ç«¯ï¼Œä¸»è¦è¡¨ç°åœ¨æœåŠ¡ç«¯requireä¸€ä¸ªæ¨¡å—ï¼Œç›´æ¥å°±ä»ç¡¬ç›˜æˆ–è€…å†…å­˜ä¸­è¯»å–äº†ï¼Œæ¶ˆè€—çš„æ—¶é—´å¯ä»¥å¿½ç•¥ã€‚è€Œæµè§ˆå™¨åˆ™ä¸åŒï¼Œéœ€è¦ä»æœåŠ¡ç«¯æ¥ä¸‹è½½è¿™ä¸ªæ–‡ä»¶ï¼Œç„¶åè¿è¡Œé‡Œé¢çš„ä»£ç æ‰èƒ½å¾—åˆ°APIï¼Œéœ€è¦èŠ±è´¹ä¸€ä¸ªhttpè¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œrequireåé¢çš„ä¸€è¡Œä»£ç ï¼Œéœ€è¦èµ„æºè¯·æ±‚å®Œæˆæ‰èƒ½æ‰§è¡Œã€‚ç”±äºæµè§ˆå™¨ç«¯æ˜¯ä»¥æ’å…¥<code>&lt;script&gt;</code>æ ‡ç­¾çš„å½¢å¼æ¥åŠ è½½èµ„æºçš„ï¼ˆajaxæ–¹å¼ä¸è¡Œï¼Œæœ‰è·¨åŸŸé—®é¢˜ï¼‰ï¼Œæ²¡åŠæ³•è®©ä»£ç åŒæ­¥æ‰§è¡Œï¼Œæ‰€ä»¥åƒcommonjsé‚£æ ·çš„å†™æ³•ä¼šç›´æ¥æŠ¥é”™ã€‚</p><p>æ‰€ä»¥ï¼Œç¤¾åŒºæ„è¯†åˆ°ï¼Œè¦æƒ³åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ä¹Ÿèƒ½æ¨¡å—åŒ–ï¼Œéœ€è¦å¯¹è§„èŒƒè¿›è¡Œå‡çº§ã€‚è€Œå°±åœ¨ç¤¾åŒºè®¨è®ºåˆ¶å®šä¸‹ä¸€ç‰ˆè§„èŒƒçš„æ—¶å€™ï¼Œå†…éƒ¨å‘ç”Ÿäº†æ¯”è¾ƒå¤§çš„åˆ†æ­§ï¼Œäº§ç”Ÿäº†ä¸åŒçš„è§„èŒƒã€‚</p><h5 id="AMD-RequireJsçš„å´›èµ·ä¸å¦¥å"><a href="#AMD-RequireJsçš„å´›èµ·ä¸å¦¥å" class="headerlink" title="AMD/RequireJsçš„å´›èµ·ä¸å¦¥å"></a>AMD/RequireJsçš„å´›èµ·ä¸å¦¥å</h5><blockquote><ol><li>ç”¨å…¨å±€å‡½æ•°defineæ¥å®šä¹‰æ¨¡å—ï¼Œç”¨æ³•ä¸ºï¼šdefine(id?, dependencies?, factory);</li><li>idä¸ºæ¨¡å—æ ‡è¯†ï¼Œéµä»CommonJS Module Identifiersè§„èŒƒ</li><li>dependenciesä¸ºä¾èµ–çš„æ¨¡å—æ•°ç»„ï¼Œåœ¨factoryä¸­éœ€ä¼ å…¥å½¢å‚ä¸ä¹‹ä¸€ä¸€å¯¹åº”</li><li>å¦‚æœdependenciesçš„å€¼ä¸­æœ‰â€requireâ€ã€â€exportsâ€æˆ–â€moduleâ€ï¼Œåˆ™ä¸commonjsä¸­çš„å®ç°ä¿æŒä¸€è‡´</li><li>å¦‚æœdependenciesçœç•¥ä¸å†™ï¼Œåˆ™é»˜è®¤ä¸º[â€œrequireâ€, â€œexportsâ€, â€œmoduleâ€]ï¼Œfactoryä¸­ä¹Ÿä¼šé»˜è®¤ä¼ å…¥require,exports,module</li><li>å¦‚æœfactoryä¸ºå‡½æ•°ï¼Œæ¨¡å—å¯¹å¤–æš´æ¼APIçš„æ–¹æ³•æœ‰ä¸‰ç§ï¼šreturnä»»æ„ç±»å‹çš„æ•°æ®ã€exports.xxx=xxxã€module.exports=xxx</li><li>å¦‚æœfactoryä¸ºå¯¹è±¡ï¼Œåˆ™è¯¥å¯¹è±¡å³ä¸ºæ¨¡å—çš„è¿”å›å€¼</li></ol></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é¡µé¢ä¸­éœ€è¦å¼•å…¥require.js</span></span><br><span class="line"><span class="comment">//data-main çš„ä½œç”¨æ˜¯å‘Šè¯‰ require.js åŠ è½½ main.jsçš„ä»£ç .</span></span><br><span class="line"><span class="comment">// &lt;script data-main="scripts/main" src="scripts/require.js"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">// math.js</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span> (<span class="params">x,y</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x+y;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    add: add</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">'math'</span>], <span class="function"><span class="keyword">function</span> (<span class="params">math</span>)</span>&#123;</span><br><span class="line">  math.add(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="å…¼å®¹å¹¶åŒ…çš„CMD-seajs"><a href="#å…¼å®¹å¹¶åŒ…çš„CMD-seajs" class="headerlink" title="å…¼å®¹å¹¶åŒ…çš„CMD/seajs"></a>å…¼å®¹å¹¶åŒ…çš„CMD/seajs</h5><p>seajsçš„ä½œè€…æ˜¯å›½å†…å¤§ç‰›, æ·˜å®å‰ç«¯ç‰ä¼¯ã€‚</p><blockquote><ol><li>ä¸€ä¸ªæ–‡ä»¶ä¸€ä¸ªæ¨¡å—ï¼Œæ‰€ä»¥ç»å¸¸å°±ç”¨æ–‡ä»¶åä½œä¸ºæ¨¡å—id</li><li>CMDæ¨å´‡ä¾èµ–å°±è¿‘ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸åœ¨defineçš„å‚æ•°ä¸­å†™ä¾èµ–ï¼Œåœ¨factoryä¸­å†™</li><li>factoryæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæœ‰ä¸‰ä¸ªå‚æ•°ï¼Œfunction(require, exports, module)<ul><li>require æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œæ¥å— æ¨¡å—æ ‡è¯† ä½œä¸ºå”¯ä¸€å‚æ•°ï¼Œç”¨æ¥è·å–å…¶ä»–æ¨¡å—æä¾›çš„æ¥å£ï¼šrequire(id)</li><li>exports æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥å‘å¤–æä¾›æ¨¡å—æ¥å£</li><li>module æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸Šé¢å­˜å‚¨äº†ä¸å½“å‰æ¨¡å—ç›¸å…³è”çš„ä¸€äº›å±æ€§å’Œæ–¹æ³•</li></ul></li></ol></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"sea.js"</span> data-main=<span class="string">"main.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="comment">//main.js</span></span><br><span class="line">seajs.use([<span class="string">'./hello'</span>, <span class="string">'jquery'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">hello, $</span>) </span>&#123;</span><br><span class="line">  $(<span class="string">'#beautiful-sea'</span>).click(hello.sayHello);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//hello</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> $ = <span class="built_in">require</span>(<span class="string">'jquery'</span>);</span><br><span class="line">  exports.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">'#hello'</span>).toggle(<span class="string">'slow'</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>AMDä¸CMDåŒºåˆ«ä¸»è¦æ˜¯ï¼š</p><ol><li>AMDæ¨å´‡ä¾èµ–å‰ç½®ï¼Œåœ¨å®šä¹‰æ¨¡å—çš„æ—¶å€™å°±è¦å£°æ˜å…¶ä¾èµ–çš„æ¨¡å—</li><li>CMDæ¨å´‡å°±è¿‘ä¾èµ–ï¼Œåªæœ‰åœ¨ç”¨åˆ°æŸä¸ªæ¨¡å—çš„æ—¶å€™å†å»require</li></ol><h5 id="é¢å‘æœªæ¥çš„ES6æ¨¡å—æ ‡å‡†"><a href="#é¢å‘æœªæ¥çš„ES6æ¨¡å—æ ‡å‡†" class="headerlink" title="é¢å‘æœªæ¥çš„ES6æ¨¡å—æ ‡å‡†"></a>é¢å‘æœªæ¥çš„ES6æ¨¡å—æ ‡å‡†</h5><p>ECMAScriptæ˜¯ç”±ECMA-262æ ‡å‡†åŒ–çš„è„šæœ¬è¯­è¨€çš„åç§°ã€‚JavaScriptå’ŒJScriptä¸ECMAScriptå…¼å®¹ï¼Œä½†åŒ…å«è¶…å‡ºECMAScriptçš„åŠŸèƒ½ã€‚ECMA-262çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬äº1997å¹´6æœˆè¢«Ecmaç»„ç»‡é‡‡çº³ã€‚</p><p>2011 å¹´ï¼ŒECMAScript 5.1(ES5) ç‰ˆå‘å¸ƒã€‚ä¹Ÿæ˜¯å‰ç«¯å¿«é€Ÿå‘å±•çš„ä¸€æ®µæ—¶é—´ã€‚ä¸Šé¢å¤§éƒ¨åˆ†æ¨¡å—è§£å†³æ–¹æ¡ˆï¼ŒjQueryç­‰æ¡†æ¶éƒ½æ˜¯åŸºäºECMAScript 5.1è§„èŒƒå¼€å‘çš„ã€‚2015 å¹´ï¼Œè´Ÿè´£åˆ¶å®š ECMAScript è§„èŒƒè‰æ¡ˆçš„å§”å‘˜ä¼šå†³å®šå°†å®šä¹‰æ–°æ ‡å‡†çš„åˆ¶åº¦æ”¹ä¸ºä¸€å¹´ä¸€æ¬¡ã€‚ES6çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬åœ¨2015 å¹´ 6 æœˆå‘å¸ƒï¼Œæ­£å¼åç§°å°±æ˜¯ã€ŠECMAScript 2015 æ ‡å‡†ã€‹ï¼ˆç®€ç§° ES2015/ES6ï¼‰ï¼Œ2016 å¹´ 6 æœˆï¼Œå°å¹…ä¿®è®¢çš„ã€ŠECMAScript 2016 æ ‡å‡†ã€‹ï¼ˆç®€ç§° ES2016/ES7ï¼‰ï¼Œ2017å¹´6æœˆï¼Œã€ŠECMAScript 2017 æ ‡å‡†ã€‹ï¼ˆç®€ç§° ES2017/ES8ï¼‰ã€‚æˆ‘ä»¬ç»Ÿä¸€æŠŠECMAScript 2015æ ‡å‡†ä¹‹åçš„ç‰ˆæœ¬ç§°ä¸º<strong>ES6</strong>.</p><p>æ¨¡å—åŠŸèƒ½ä¸»è¦ç”±ä¸¤ä¸ªå‘½ä»¤æ„æˆï¼š<code>export</code> å’Œ <code>import</code>ã€‚<code>export</code>å‘½ä»¤ç”¨äºè§„å®šæ¨¡å—çš„å¯¹å¤–æ¥å£ï¼Œ<code>import</code>å‘½ä»¤ç”¨äºè¾“å…¥å…¶ä»–æ¨¡å—æä¾›çš„åŠŸèƒ½ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//math.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x+y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//app.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;add&#125; <span class="keyword">from</span> <span class="string">'./math'</span>;</span><br><span class="line">add(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ç”±äºES6çš„æ ‡å‡†å¤ªè¶…å‰ï¼Œæµè§ˆå™¨çš„æ›´æ–°æ— æ³•è·Ÿä¸Šï¼Œæ‰€ä»¥è¿˜ä¸èƒ½ç›´æ¥åº”ç”¨åˆ°æµè§ˆå™¨é‡Œé¢ã€‚é€šè¿‡Babel è¯­æ³•è½¬æ¢å™¨åœ¨æœ¬åœ°ç¼–è¯‘æˆæµè§ˆå™¨å¯è¯†åˆ«çš„ES5ä»£ç ã€‚</p><h3 id="æœªæ¥"><a href="#æœªæ¥" class="headerlink" title="æœªæ¥"></a>æœªæ¥</h3><p>å‰ç«¯å‘å±•åˆ°æ¨¡å—åŒ–æ—¶ä»£å˜å¾—è¶Šæ¥æ­£è§„ï¼Œå›¢é˜Ÿä¹‹é—´çš„é…åˆä¹Ÿè¶Šæ¥è¶Šé‡ï¼Œé‡åˆ°çš„é—®é¢˜è¶Šæ¥è¶Šå¤šï¼Œé€šè¿‡å€Ÿé‰´ä¼ ç»Ÿçš„åç«¯å¼€å‘æ¨¡å¼ï¼Œè¡ç”Ÿå‡ºäº†è‡ªå·±çš„JavaScriptè®¾è®¡æ¨¡å¼ï¼ˆå•ä¾‹æ¨¡å¼ï¼Œè§‚å¯Ÿè€…æ¨¡å¼ï¼ŒåŸå‹æ¨¡å¼ç­‰ï¼‰ï¼Œä¹Ÿæœ‰äº†è‡ªå·±çš„æ¶æ„æ¨¡å¼ï¼ˆMVCï¼ŒMVVMï¼ŒMVPï¼‰ã€‚</p><p>æ ¹æ®ä¸åŒçš„è®¾è®¡æ¨¡å¼æœ‰å‡ºç°äº†ä¸åŒçš„å‰ç«¯æ¡†æ¶(Ext JS, jQuery UI, jQuery Mobile, Dojo, Prototype JS, Kissy, React, Vue,  Angularç­‰) ã€‚</p><p>æ—¢ç„¶JavaScriptå‡ºç°äº†å„ç§ä¸åŒçš„æ¨¡å—è§£å†³æ–¹æ¡ˆï¼ŒCSSä¹Ÿéœ€è¦è·Ÿä¸ŠJavaScriptæ¨¡å—åŒ–è¿›ç¨‹ï¼ˆSass, Less, Stylusï¼‰ã€‚</p><p>HTMLä¹Ÿå‡ºç°äº†å„ç§æ¨¡ç‰ˆç³»ç»Ÿï¼ˆHandlebarsï¼ŒEJSç­‰ï¼‰ã€‚</p><p>å„ç§ç¼–è¯‘å·¥å…·ï¼ˆgrunt, gulp, webpackç­‰ï¼‰ã€‚</p><p>æœ€å, æˆ‘ä»¬æœŸå¾…æ— æ³•é¢„æµ‹çš„æœªæ¥ã€‚</p><blockquote><p>It was the best of times, it was the worst of times, it was the age of wisdom, it was the age of foolishness, it was the epoch of belief, it was the epoch of incredulity, it was the season of Light, it was the season of Darkness, it was the spring of hope, it was the winter of despair, we had everything before us, we had nothing before us, we were all going direct to Heaven, we were all going direct the other way- in short, the period was so far like the present period, that some of its noisiest authorities insisted on its being received, for good or for evil, in the superlative degree of comparison only.</p><p>é‚£æ˜¯æœ€å¥½çš„æ™‚ä»£ï¼Œé‚£æ˜¯æœ€å£çš„æ™‚ä»£ï¼›é‚£æ˜¯æ™ºæ…§çš„æ­²æœˆï¼Œé‚£æ˜¯æ„šæ˜§çš„æ­²æœˆï¼›é‚£æ˜¯ä¿¡ä»»çš„ç´€å…ƒï¼Œé‚£æ˜¯æ‡·ç–‘çš„ç´€å…ƒï¼›é‚£æ˜¯å…‰æ˜çš„å­£ç¯€ï¼Œé‚£æ˜¯é»‘æš—çš„å­£ç¯€ï¼›é‚£æ˜¯å¸Œæœ›çš„æ˜¥å¤©ï¼Œé‚£æ˜¯å¤±æœ›çš„å†¬å¤©ï¼›æˆ‘å€‘çš„å‰é¢æ›¾æ‡‰æœ‰ç›¡æœ‰ï¼Œæˆ‘å€‘çš„å‰é¢æ›¾ä¸€ç„¡æ‰€æœ‰ï¼›æˆ‘å€‘éƒ½å°‡èµ°ä¸Šå¤©å ‚ï¼Œæˆ‘å€‘éƒ½å°‡èµ°å‘å¦ä¸€ç«¯â€“ç°¡è¨€ä¹‹ï¼Œé‚£æ®µæ™‚æœŸèˆ‡ç¾åœ¨çš„æ™‚æœŸæ˜¯é‚£éº¼ç›¸ä¼¼ï¼Œé‚£äº›æœ€åµé›œçš„æ¬Šå¨äººå£«éƒ½å …æŒï¼Œä¸è«–æ˜¯å–„è‰¯æˆ–é‚ªæƒ¡ï¼Œç”¨æœ€é«˜ç´šå½¢å®¹è©ä¾†è©•è«–ã€‚</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h5 id=&quot;ä»€ä¹ˆæ˜¯å‰ç«¯&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯å‰ç«¯&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯å‰ç«¯&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯å‰ç«¯&lt;/h5&gt;&lt;p&gt;å‰ç«¯å·¥ç¨‹å¸ˆä¸»è¦åˆ©ç”¨HMTLä¸CSSæ„å»ºé¡µé¢ï¼Œç”¨JavaScriptå®Œå–„äº¤äº’ä»¥åŠç”¨æˆ·ä½“éªŒã€‚&lt;/p&gt;
&lt;h4 id=&quot;è¯
      
    
    </summary>
    
      <category term="Notes" scheme="http://hero-guo.com/categories/Notes/"/>
    
    
      <category term="JavaScript" scheme="http://hero-guo.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®å»é‡</title>
    <link href="http://hero-guo.com/2017/11/06/arr-uniq/"/>
    <id>http://hero-guo.com/2017/11/06/arr-uniq/</id>
    <published>2017-11-05T16:00:00.000Z</published>
    <updated>2017-11-06T09:29:17.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="åªåŒ…å«åŸå§‹å˜é‡-ä¸ä¼šåˆ¤æ–­å€¼çš„ç±»å‹"><a href="#åªåŒ…å«åŸå§‹å˜é‡-ä¸ä¼šåˆ¤æ–­å€¼çš„ç±»å‹" class="headerlink" title="åªåŒ…å«åŸå§‹å˜é‡, ä¸ä¼šåˆ¤æ–­å€¼çš„ç±»å‹"></a>åªåŒ…å«åŸå§‹å˜é‡, ä¸ä¼šåˆ¤æ–­å€¼çš„ç±»å‹</h4><a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [ <span class="number">1</span>, <span class="number">1</span>, <span class="string">'a'</span>, <span class="string">'a'</span> ];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uniq</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arr.filter(<span class="function">(<span class="params">v, i</span>) =&gt;</span> arr.indexOf(v) === i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(uniq(array)); <span class="comment">//=&gt; [1, 'a']</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [ <span class="number">1</span>, <span class="number">1</span>, <span class="string">'a'</span>, <span class="string">'a'</span> ];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uniq</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(arr));</span><br><span class="line"><span class="comment">//return [...new Set(arr)]; </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(uniq(array)); <span class="comment">//=&gt; [1, 'a']</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [ <span class="number">1</span>, <span class="number">1</span>, <span class="string">'a'</span>, <span class="string">'a'</span> ];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uniq</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> res = [];</span><br><span class="line">  <span class="keyword">const</span> len = arr.length;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!~res.indexOf(arr[i])) res.push(arr[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(uniq(array)); <span class="comment">//=&gt; [1, 'a']</span></span><br></pre></td></tr></table></figure><h4 id="åŒ…å«å¼•ç”¨ç±»å‹"><a href="#åŒ…å«å¼•ç”¨ç±»å‹" class="headerlink" title="åŒ…å«å¼•ç”¨ç±»å‹"></a>åŒ…å«å¼•ç”¨ç±»å‹</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [&#123; <span class="attr">a</span>: <span class="number">1</span> &#125;, &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;, [ <span class="number">1</span>, <span class="number">2</span> ], [ <span class="number">1</span>, <span class="number">2</span> ]];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uniq</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">const</span> hash = &#123;&#125;;</span><br><span class="line"> <span class="keyword">return</span> arr.filter(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">const</span> key = <span class="built_in">JSON</span>.stringify(v);</span><br><span class="line">   <span class="keyword">const</span> bool = !!hash[key];</span><br><span class="line">   <span class="keyword">return</span> bool ? <span class="literal">false</span> : hash[key] = <span class="literal">true</span>;</span><br><span class="line"> &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(uniq(array)); <span class="comment">//=&gt; [&#123; a: 1 &#125;, [ 1, 2 ]]</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;åªåŒ…å«åŸå§‹å˜é‡-ä¸ä¼šåˆ¤æ–­å€¼çš„ç±»å‹&quot;&gt;&lt;a href=&quot;#åªåŒ…å«åŸå§‹å˜é‡-ä¸ä¼šåˆ¤æ–­å€¼çš„ç±»å‹&quot; class=&quot;headerlink&quot; title=&quot;åªåŒ…å«åŸå§‹å˜é‡, ä¸ä¼šåˆ¤æ–­å€¼çš„ç±»å‹&quot;&gt;&lt;/a&gt;åªåŒ…å«åŸå§‹å˜é‡, ä¸ä¼šåˆ¤æ–­å€¼çš„ç±»å‹&lt;/h4&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://hero-guo.com/categories/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://hero-guo.com/tags/JavaScript/"/>
    
      <category term="æ•°æ®å»é‡" scheme="http://hero-guo.com/tags/%E6%95%B0%E6%8D%AE%E5%8E%BB%E9%87%8D/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptæ•°æ®ç»“æ„ä¸ç®—æ³• â€”â€” æ ˆ</title>
    <link href="http://hero-guo.com/2017/09/09/javascript-%E2%80%94%E2%80%94-%E6%A0%88/"/>
    <id>http://hero-guo.com/2017/09/09/javascript-â€”â€”-æ ˆ/</id>
    <published>2017-09-09T07:04:20.000Z</published>
    <updated>2018-07-11T13:37:05.847Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘çœ‹äº†ä¸€æœ¬ã€Šå­¦ä¹ JavaScriptæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹ï¼Œæƒ³æŠŠé‡Œé¢ä»‹ç»çš„ä¸€äº›æ•°æ®ç»“æ„å’Œç®—æ³•è®°å½•ä¸‹æ¥ï¼ŒåŠ æ·±å°è±¡ã€‚</p><blockquote><p>æ ˆæ˜¯ä¸€ç§éµä»åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰åŸåˆ™çš„æœ‰åºé›†åˆã€‚æ–°æ·»åŠ çš„æˆ–å¾…åˆ é™¤çš„å…ƒç´ éƒ½ä¿å­˜åœ¨æ ˆçš„æœ«å°¾ã€‚ç§°ä½œæ ˆé¡¶ï¼Œå¦ä¸€ç«¯å°±å«æ ˆåº•ã€‚åœ¨æ ˆé‡Œï¼Œæ–°å…ƒç´ éƒ½é è¿‘æ ˆé¡¶ï¼Œå°±å…ƒç´ éƒ½æ¥è¿‘æ ˆåº•ã€‚</p></blockquote><p>åœ¨JavaScripté‡Œé¢æ•°ç»„çš„ä¸€äº›æ–¹æ³•å¯ä»¥å¾ˆå¥½çš„æ¨¡æ‹Ÿæ ˆã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *ç”¨JavaScriptæ•°ç»„æ¨¡æ‹Ÿæ ˆ</span></span><br><span class="line"><span class="comment"> *@class Stack</span></span><br><span class="line"><span class="comment"> *@constructor</span></span><br><span class="line"><span class="comment"> *@method</span></span><br><span class="line"><span class="comment"> ** push(element) æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæ–°å…ƒç´ åˆ°æ ˆé¡¶</span></span><br><span class="line"><span class="comment"> ** pop() ç§»é™¤æ ˆé¡¶çš„å…ƒç´ ï¼ŒåŒæ—¶è¿”å›è¢«ç§»é™¤çš„æ–°å…ƒç´ </span></span><br><span class="line"><span class="comment"> ** peek() è¿”å›æ ˆé¡¶å…ƒç´ ï¼Œä¸å¯¹æ ˆåšä»»ä½•ä¿®æ”¹</span></span><br><span class="line"><span class="comment"> ** isEmpty() è¿”å›ture(æ ˆä¸ºç©º) å’Œ false(éç©º)</span></span><br><span class="line"><span class="comment"> ** clear() ç§»é™¤æ ˆé‡Œçš„æ‰€æœ‰å…ƒç´ </span></span><br><span class="line"><span class="comment"> ** size() è¿”å›æ ˆé‡Œå…ƒç´ çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment"> ** print() è¾“å‡ºæ ˆ</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Stack</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> items = []; <span class="comment">//ä¿å­˜æ ˆé‡Œçš„å…ƒç´ </span></span><br><span class="line">  <span class="keyword">this</span>.push = <span class="function"><span class="keyword">function</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">    items.push(element);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.pop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> items.pop();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.peek = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> items[items.length - <span class="number">1</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.isEmpty = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> !items.length;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.clear = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    items = [];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.size = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> items.length;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.print = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(items.toString());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªæ ˆçš„å®ç°ã€‚ç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹æ€ä¹ˆä½¿ç”¨å®ƒã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> stack = <span class="keyword">new</span> Stack();</span><br><span class="line"><span class="comment">//å¾€æ ˆé‡Œæ·»åŠ äº›å…ƒç´ </span></span><br><span class="line">stack.push(<span class="number">3</span>);</span><br><span class="line">stack.push(<span class="number">4</span>);</span><br><span class="line"><span class="comment">//è°ƒç”¨æ–¹æ³•</span></span><br><span class="line"><span class="built_in">console</span>.log(stack.isEmpty()); <span class="comment">// =&gt; false</span></span><br><span class="line"><span class="built_in">console</span>.log(stack.size()); <span class="comment">// =&gt; 2</span></span><br><span class="line"><span class="built_in">console</span>.log(stack.peek()); <span class="comment">// =&gt; 4</span></span><br><span class="line"><span class="built_in">console</span>.log(stack.print()); <span class="comment">// =&gt; '3,4'</span></span><br><span class="line"></span><br><span class="line">stack.pop();</span><br><span class="line"><span class="built_in">console</span>.log(stack.print()); <span class="comment">// =&gt; 3</span></span><br><span class="line"></span><br><span class="line">stack.clear()</span><br><span class="line"><span class="built_in">console</span>.log(stack.isEmpty()); <span class="comment">// =&gt; true</span></span><br><span class="line"><span class="built_in">console</span>.log(stack.print()); <span class="comment">// =&gt; ''</span></span><br></pre></td></tr></table></figure></p><h6 id="å®é™…åº”ç”¨"><a href="#å®é™…åº”ç”¨" class="headerlink" title="å®é™…åº”ç”¨"></a>å®é™…åº”ç”¨</h6><p>è¿›åˆ¶è½¬æ¢<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">baseConverter</span>(<span class="params">num, base</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> stack = <span class="keyword">new</span> Stack(),</span><br><span class="line">      base = base || <span class="number">2</span>,</span><br><span class="line">      rem,</span><br><span class="line">      digits = <span class="string">'0123456789ABCDEF'</span>,</span><br><span class="line">      baseString = <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">while</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    rem = <span class="built_in">Math</span>.floor(num % base);</span><br><span class="line">    stack.push(rem);</span><br><span class="line">    num = <span class="built_in">Math</span>.floor(num / base);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">    baseString += digits[stack.pop()];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> baseString;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(baseConverter(<span class="number">100</span>)); <span class="comment">//=&gt; 1100100</span></span><br><span class="line"><span class="built_in">console</span>.log(baseConverter(<span class="number">100</span>, <span class="number">8</span>)); <span class="comment">//=&gt; 144</span></span><br><span class="line"><span class="built_in">console</span>.log(baseConverter(<span class="number">100</span>, <span class="number">16</span>)); <span class="comment">//=&gt; 64</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æœ€è¿‘çœ‹äº†ä¸€æœ¬ã€Šå­¦ä¹ JavaScriptæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹ï¼Œæƒ³æŠŠé‡Œé¢ä»‹ç»çš„ä¸€äº›æ•°æ®ç»“æ„å’Œç®—æ³•è®°å½•ä¸‹æ¥ï¼ŒåŠ æ·±å°è±¡ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ ˆæ˜¯ä¸€ç§éµä»åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰åŸåˆ™çš„æœ‰åºé›†åˆã€‚æ–°æ·»åŠ çš„æˆ–å¾…åˆ é™¤çš„å…ƒç´ éƒ½ä¿å­˜åœ¨æ ˆçš„æœ«å°¾ã€‚ç§°ä½œæ ˆé¡¶ï¼Œå¦ä¸€ç«¯å°±å«æ ˆåº•ã€‚åœ¨æ ˆé‡Œï¼Œæ–°
      
    
    </summary>
    
      <category term="Notes" scheme="http://hero-guo.com/categories/Notes/"/>
    
    
      <category term="JavaScript" scheme="http://hero-guo.com/tags/JavaScript/"/>
    
      <category term="æ•°æ®ç»“æ„ä¸ç®—æ³•" scheme="http://hero-guo.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript é¢å‘å¯¹è±¡</title>
    <link href="http://hero-guo.com/2017/04/11/JavaScript-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"/>
    <id>http://hero-guo.com/2017/04/11/JavaScript-é¢å‘å¯¹è±¡/</id>
    <published>2017-04-11T03:05:34.000Z</published>
    <updated>2017-08-30T14:28:05.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h3><p>æ„é€ å‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡newè¿ç®—ç¬¦å¯ä»¥ç”Ÿæˆä¸€ä»½å®ä¾‹åŒæ—¶æŠŠthisç»‘å®šåˆ°å®ä¾‹ä¸Šã€‚JavaScriptè§„å®šï¼Œæ¯ä¸€ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼ŒæŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œéƒ½ä¼šè¢«æ„é€ å‡½æ•°çš„å®ä¾‹ç»§æ‰¿ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Vehicle</span> (<span class="params">engines</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.engines = engines;</span><br><span class="line">  &#125;</span><br><span class="line">  Vehicle.prototype.drive = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`engines=&gt;<span class="subst">$&#123;<span class="keyword">this</span>.engines&#125;</span>`</span>);    </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//å®ä¾‹</span></span><br><span class="line">  <span class="keyword">var</span> car1 = <span class="keyword">new</span> Vehicle(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">var</span> car2 = <span class="keyword">new</span> Vehicle(<span class="number">2</span>);</span><br><span class="line">  car1.drive(); <span class="comment">//=&gt; engines=&gt;1</span></span><br><span class="line">  car2.drive(); <span class="comment">//=&gt; engines=&gt;2</span></span><br><span class="line">  <span class="built_in">console</span>.log(car1.constructor === Vehicle); <span class="comment">//true</span></span><br><span class="line">  <span class="built_in">console</span>.log(car2.constructor === Vehicle); <span class="comment">//true</span></span><br></pre></td></tr></table></figure></p><a id="more"></a><p>instanceofæ˜¯ä¸€ä¸ªæ“ä½œç¬¦ï¼Œå¯ä»¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºæŸä¸ªç±»å‹çš„å®ä¾‹<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(car1 <span class="keyword">instanceof</span> Vehicle); <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(car2 <span class="keyword">instanceof</span> Vehicle); <span class="comment">//true</span></span><br></pre></td></tr></table></figure></p><p>instanceofåˆ¤æ–­çš„æ˜¯å¯¹è±¡<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="keyword">instanceof</span> <span class="built_in">Number</span> <span class="comment">//false</span></span><br></pre></td></tr></table></figure></p><p>isPrototypeOfç”¨æ¥åˆ¤æ–­proptotypeå¯¹è±¡å’Œå®ä¾‹ä¹‹é—´çš„å…³ç³»<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(Vehicle.prototype.isPrototypeOf(car1)); <span class="comment">//true</span></span><br><span class="line">  <span class="built_in">console</span>.log(Vehicle.prototype.isPrototypeOf(car2)); <span class="comment">//true</span></span><br></pre></td></tr></table></figure></p><p>hasOwnProperty()å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦åŒ…å«è‡ªå®šä¹‰å±æ€§è€Œä¸æ˜¯åŸå‹é“¾ä¸Šçš„å±æ€§<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(car1.hasOwnProperty(<span class="string">'engines'</span>)); <span class="comment">//true</span></span><br><span class="line"> <span class="built_in">console</span>.log(car1.hasOwnProperty(<span class="string">'drive'</span>)); <span class="comment">//false</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;æ„é€ å‡½æ•°&quot;&gt;&lt;a href=&quot;#æ„é€ å‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;æ„é€ å‡½æ•°&quot;&gt;&lt;/a&gt;æ„é€ å‡½æ•°&lt;/h3&gt;&lt;p&gt;æ„é€ å‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡newè¿ç®—ç¬¦å¯ä»¥ç”Ÿæˆä¸€ä»½å®ä¾‹åŒæ—¶æŠŠthisç»‘å®šåˆ°å®ä¾‹ä¸Šã€‚JavaScriptè§„å®šï¼Œæ¯ä¸€ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼ŒæŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œéƒ½ä¼šè¢«æ„é€ å‡½æ•°çš„å®ä¾‹ç»§æ‰¿ã€‚&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Vehicle&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;engines&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.engines = engines;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Vehicle.prototype.drive = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;`engines=&amp;gt;&lt;span class=&quot;subst&quot;&gt;$&amp;#123;&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.engines&amp;#125;&lt;/span&gt;`&lt;/span&gt;);    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;//å®ä¾‹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; car1 = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Vehicle(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; car2 = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Vehicle(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  car1.drive(); &lt;span class=&quot;comment&quot;&gt;//=&amp;gt; engines=&amp;gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  car2.drive(); &lt;span class=&quot;comment&quot;&gt;//=&amp;gt; engines=&amp;gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(car1.constructor === Vehicle); &lt;span class=&quot;comment&quot;&gt;//true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(car2.constructor === Vehicle); &lt;span class=&quot;comment&quot;&gt;//true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://hero-guo.com/categories/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://hero-guo.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>promise.allé”™è¯¯å¤„ç†</title>
    <link href="http://hero-guo.com/2017/03/13/promise-all/"/>
    <id>http://hero-guo.com/2017/03/13/promise-all/</id>
    <published>2017-03-13T13:15:15.000Z</published>
    <updated>2017-08-30T15:38:19.000Z</updated>
    
    <content type="html"><![CDATA[<p>é€šå¸¸å¤„ç†å¤šä¸ªè¯·æ±‚çš„æ—¶å€™æˆ‘ä»¬ä¼šç”¨Promise.all()æ–¹æ³•ã€‚è¯¥æ–¹æ³•æŒ‡å½“æ‰€æœ‰åœ¨å¯è¿­ä»£å‚æ•°ä¸­çš„ promises å·²å®Œæˆï¼Œæˆ–è€…ç¬¬ä¸€ä¸ªä¼ é€’çš„ promiseï¼ˆæŒ‡ rejectï¼‰å¤±è´¥æ—¶ï¼Œè¿”å› promiseã€‚ä½†æ˜¯å½“å…¶ä¸­ä»»ä½•ä¸€ä¸ªè¢«æ‹’ç»çš„è¯ã€‚ä¸»Promise.all([..])å°±ä¼šç«‹å³è¢«æ‹’ç»ï¼Œå¹¶ä¸¢å¼ƒæ¥è‡ªå…¶ä»–æ‰€æœ‰promisçš„å…¨éƒ¨ç»“æœã€‚<br><a id="more"></a><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="built_in">Promise</span>.resolve(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="built_in">Promise</span>.reject(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">var</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(resolve, <span class="number">100</span>, <span class="string">"foo"</span>);</span><br><span class="line">&#125;); </span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.all([p1, p2, p3]).then(<span class="function"><span class="params">values</span> =&gt;</span> &#123; </span><br><span class="line">  <span class="built_in">console</span>.log(values); <span class="comment">// æ°¸è¿œèµ°ä¸åˆ°è¿™é‡Œ</span></span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err); <span class="comment">// 2</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚æ‰€ä»¥åœ¨ä½¿ç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™è¦è®°ä½ä¸ºæ¯ä¸ªpromiseå…³è”ä¸€ä¸ªé”™è¯¯çš„å¤„ç†å‡½æ•°<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="built_in">Promise</span>.resolve(<span class="number">3</span>).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> err;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="built_in">Promise</span>.reject(<span class="number">2</span>).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> err;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  setTimeout(resolve, <span class="number">100</span>, <span class="string">"foo"</span>);</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> err;</span><br><span class="line">&#125;); </span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.all([p1, p2, p3]).then(<span class="function"><span class="params">values</span> =&gt;</span> &#123; </span><br><span class="line">  <span class="built_in">console</span>.log(values); <span class="comment">// [3, 2, "foo"]</span></span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>); <span class="comment">//ä¸ä¼šèµ°åˆ°è¿™é‡Œ</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é€šå¸¸å¤„ç†å¤šä¸ªè¯·æ±‚çš„æ—¶å€™æˆ‘ä»¬ä¼šç”¨Promise.all()æ–¹æ³•ã€‚è¯¥æ–¹æ³•æŒ‡å½“æ‰€æœ‰åœ¨å¯è¿­ä»£å‚æ•°ä¸­çš„ promises å·²å®Œæˆï¼Œæˆ–è€…ç¬¬ä¸€ä¸ªä¼ é€’çš„ promiseï¼ˆæŒ‡ rejectï¼‰å¤±è´¥æ—¶ï¼Œè¿”å› promiseã€‚ä½†æ˜¯å½“å…¶ä¸­ä»»ä½•ä¸€ä¸ªè¢«æ‹’ç»çš„è¯ã€‚ä¸»Promise.all([..])å°±ä¼šç«‹å³è¢«æ‹’ç»ï¼Œå¹¶ä¸¢å¼ƒæ¥è‡ªå…¶ä»–æ‰€æœ‰promisçš„å…¨éƒ¨ç»“æœã€‚&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://hero-guo.com/categories/JavaScript/"/>
    
    
  </entry>
  
  <entry>
    <title>å‡½æ•°æŸ¯é‡ŒåŒ–</title>
    <link href="http://hero-guo.com/2017/02/27/curry/"/>
    <id>http://hero-guo.com/2017/02/27/curry/</id>
    <published>2017-02-27T03:27:55.000Z</published>
    <updated>2017-08-30T14:28:05.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‡½æ•°æŸ¯é‡ŒåŒ–å®šä¹‰"><a href="#å‡½æ•°æŸ¯é‡ŒåŒ–å®šä¹‰" class="headerlink" title="å‡½æ•°æŸ¯é‡ŒåŒ–å®šä¹‰"></a>å‡½æ•°æŸ¯é‡ŒåŒ–å®šä¹‰</h3><p>æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰æ˜¯æŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°(æœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°)çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°ä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°çš„æŠ€æœ¯ã€‚</p><h3 id="å‡½æ•°æŸ¯ç†åŒ–å®ç°"><a href="#å‡½æ•°æŸ¯ç†åŒ–å®ç°" class="headerlink" title="å‡½æ•°æŸ¯ç†åŒ–å®ç°"></a>å‡½æ•°æŸ¯ç†åŒ–å®ç°</h3><a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> autocurry = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> numargs = fn.length;</span><br><span class="line">  <span class="keyword">return</span> createRecurser([]);</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">createRecurser</span> (<span class="params">acc</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> args = [].slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">      <span class="keyword">return</span> recurse(acc, args);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">recurse</span> (<span class="params">acc, args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> newacc = acc.concat(args);</span><br><span class="line">    <span class="keyword">if</span> (newacc.length &lt; numargs) &#123;</span><br><span class="line">      <span class="keyword">return</span> createRecurser(newacc);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> fn.apply(<span class="keyword">this</span>, newacc);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> add = autocurry(<span class="function"><span class="keyword">function</span> (<span class="params">a,b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>,<span class="number">2</span>)); =&gt; <span class="number">3</span></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>)(<span class="number">3</span>)); =&gt; <span class="number">4</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å‡½æ•°æŸ¯é‡ŒåŒ–å®šä¹‰&quot;&gt;&lt;a href=&quot;#å‡½æ•°æŸ¯é‡ŒåŒ–å®šä¹‰&quot; class=&quot;headerlink&quot; title=&quot;å‡½æ•°æŸ¯é‡ŒåŒ–å®šä¹‰&quot;&gt;&lt;/a&gt;å‡½æ•°æŸ¯é‡ŒåŒ–å®šä¹‰&lt;/h3&gt;&lt;p&gt;æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰æ˜¯æŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°(æœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°)çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°ä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°çš„æŠ€æœ¯ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å‡½æ•°æŸ¯ç†åŒ–å®ç°&quot;&gt;&lt;a href=&quot;#å‡½æ•°æŸ¯ç†åŒ–å®ç°&quot; class=&quot;headerlink&quot; title=&quot;å‡½æ•°æŸ¯ç†åŒ–å®ç°&quot;&gt;&lt;/a&gt;å‡½æ•°æŸ¯ç†åŒ–å®ç°&lt;/h3&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://hero-guo.com/categories/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://hero-guo.com/tags/JavaScript/"/>
    
      <category term="æŸ¯é‡ŒåŒ–" scheme="http://hero-guo.com/tags/%E6%9F%AF%E9%87%8C%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript äº‹ä»¶è¯¦è§£</title>
    <link href="http://hero-guo.com/2017/02/13/javascript-event/"/>
    <id>http://hero-guo.com/2017/02/13/javascript-event/</id>
    <published>2017-02-13T03:17:33.000Z</published>
    <updated>2018-07-11T13:37:09.254Z</updated>
    
    <content type="html"><![CDATA[<h3 id="äº‹ä»¶å†’æ³¡ä¸æ•è·"><a href="#äº‹ä»¶å†’æ³¡ä¸æ•è·" class="headerlink" title="äº‹ä»¶å†’æ³¡ä¸æ•è·"></a>äº‹ä»¶å†’æ³¡ä¸æ•è·</h3><ol><li><p>å†’æ³¡å‹äº‹ä»¶ï¼šäº‹ä»¶æŒ‰ç…§ä»æœ€ç‰¹å®šçš„äº‹ä»¶ç›®æ ‡åˆ°æœ€ä¸ç‰¹å®šçš„äº‹ä»¶ç›®æ ‡(documentå¯¹è±¡)çš„é¡ºåºè§¦å‘ã€‚<br>IE 5.5: div -&gt; body -&gt; document<br>IE 6.0: div -&gt; body -&gt; html -&gt; document<br>Mozilla 1.0: div -&gt; body -&gt; html -&gt; document -&gt; window</p></li><li><p>æ•è·å‹äº‹ä»¶(event capturing)ï¼šäº‹ä»¶ä»æœ€ä¸ç²¾ç¡®çš„å¯¹è±¡(document å¯¹è±¡)å¼€å§‹è§¦å‘ï¼Œç„¶ååˆ°æœ€ç²¾ç¡®(ä¹Ÿå¯ä»¥åœ¨çª—å£çº§åˆ«æ•è·äº‹ä»¶ï¼Œä¸è¿‡å¿…é¡»ç”±å¼€å‘äººå‘˜ç‰¹åˆ«æŒ‡å®š)ã€‚</p></li><li>DOMäº‹ä»¶æµï¼šåŒæ—¶æ”¯æŒä¸¤ç§äº‹ä»¶æ¨¡å‹ï¼šæ•è·å‹äº‹ä»¶å’Œå†’æ³¡å‹äº‹ä»¶ï¼Œä½†æ˜¯ï¼Œæ•è·å‹äº‹ä»¶å…ˆå‘ç”Ÿã€‚ä¸¤ç§äº‹ä»¶æµä¼šè§¦åŠDOMä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œä»documentå¯¹è±¡å¼€å§‹ï¼Œä¹Ÿåœ¨documentå¯¹è±¡ç»“æŸã€‚<br>DOMäº‹ä»¶æ¨¡å‹æœ€ç‹¬ç‰¹çš„æ€§è´¨æ˜¯ï¼Œæ–‡æœ¬èŠ‚ç‚¹ä¹Ÿè§¦å‘äº‹ä»¶(åœ¨IEä¸­ä¸ä¼š)ã€‚<a id="more"></a><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><p>è¿™ä¸¤ä¸ªå…ƒç´ éƒ½ç»‘å®šäº†clickäº‹ä»¶ï¼Œå¦‚æœç”¨æˆ·ç‚¹å‡»äº†pï¼Œå®ƒåœ¨divå’Œpä¸Šéƒ½è§¦å‘äº†clickäº‹ä»¶ï¼Œé‚£è¿™ä¸¤ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºå“ªä¸ªå…ˆæ‰§è¡Œå‘¢ï¼Ÿäº‹ä»¶é¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿ</p><h5 id="äº‹ä»¶æ•è·"><a href="#äº‹ä»¶æ•è·" class="headerlink" title="äº‹ä»¶æ•è·"></a>äº‹ä»¶æ•è·</h5><p>å½“ä½ ä½¿ç”¨äº‹ä»¶æ•è·æ—¶ï¼Œçˆ¶çº§å…ƒç´ å…ˆè§¦å‘ï¼Œå­çº§å…ƒç´ åè§¦å‘ï¼Œå³divå…ˆè§¦å‘ï¼Œpåè§¦å‘ã€‚</p><h5 id="äº‹ä»¶å†’æ³¡"><a href="#äº‹ä»¶å†’æ³¡" class="headerlink" title="äº‹ä»¶å†’æ³¡"></a>äº‹ä»¶å†’æ³¡</h5><p>å½“ä½ ä½¿ç”¨äº‹ä»¶å†’æ³¡æ—¶ï¼Œå­çº§å…ƒç´ å…ˆè§¦å‘ï¼Œçˆ¶çº§å…ƒç´ åè§¦å‘ï¼Œå³på…ˆè§¦å‘ï¼Œdivåè§¦å‘ã€‚</p><h5 id="W3Cæ¨¡å‹"><a href="#W3Cæ¨¡å‹" class="headerlink" title="W3Cæ¨¡å‹"></a>W3Cæ¨¡å‹</h5><p>W3Cæ¨¡å‹æ˜¯å°†ä¸¤è€…è¿›è¡Œä¸­å’Œï¼Œåœ¨W3Cæ¨¡å‹ä¸­ï¼Œä»»ä½•äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå…ˆä»é¡¶å±‚å¼€å§‹è¿›è¡Œäº‹ä»¶æ•è·ï¼Œç›´åˆ°äº‹ä»¶è§¦å‘åˆ°è¾¾äº†äº‹ä»¶æºå…ƒç´ ã€‚ç„¶åï¼Œå†ä»äº‹ä»¶æºå¾€ä¸Šè¿›è¡Œäº‹ä»¶å†’æ³¡ï¼Œç›´åˆ°åˆ°è¾¾documentã€‚</p><p>ç¨‹åºå‘˜å¯ä»¥è‡ªå·±é€‰æ‹©ç»‘å®šäº‹ä»¶æ—¶é‡‡ç”¨äº‹ä»¶æ•è·è¿˜æ˜¯äº‹ä»¶å†’æ³¡ï¼Œæ–¹æ³•å°±æ˜¯ç»‘å®šäº‹ä»¶æ—¶é€šè¿‡addEventListenerå‡½æ•°ï¼Œå®ƒæœ‰ä¸‰ä¸ªå‚æ•°ï¼Œtype, listener[, options]ã€‚ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºç›‘å¬äº‹ä»¶ç±»å‹çš„å­—ç¬¦ä¸²ã€‚ç¬¬äºŒä¸ªå‚æ•°å½“æ‰€ç›‘å¬çš„äº‹ä»¶ç±»å‹è§¦å‘æ—¶ï¼Œä¼šæ¥æ”¶åˆ°ä¸€ä¸ªäº‹ä»¶é€šçŸ¥ï¼ˆå®ç°äº† Event æ¥å£çš„å¯¹è±¡ï¼‰å¯¹è±¡ã€‚listener å¿…é¡»æ˜¯ä¸€ä¸ªå®ç°äº† EventListener æ¥å£çš„å¯¹è±¡ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ç¬¬ä¸‰ä¸ªå‚æ•°è‹¥æ˜¯trueï¼Œåˆ™è¡¨ç¤ºé‡‡ç”¨äº‹ä»¶æ•è·ï¼Œè‹¥æ˜¯falseï¼Œåˆ™è¡¨ç¤ºé‡‡ç”¨äº‹ä»¶å†’æ³¡<br>ele.addEventListener(â€˜clickâ€™,doSomething,true)<br>true=æ•è·<br>false=å†’æ³¡</p><h5 id="IE"><a href="#IE" class="headerlink" title="IE"></a>IE</h5><p>IEåªæ”¯æŒäº‹ä»¶å†’æ³¡ï¼Œä¸æ”¯æŒäº‹ä»¶æ•è·ï¼Œå®ƒä¹Ÿä¸æ”¯æŒaddEventListenerå‡½æ•°ï¼Œä¸ä¼šç”¨ç¬¬ä¸‰ä¸ªå‚æ•°æ¥è¡¨ç¤ºæ˜¯å†’æ³¡è¿˜æ˜¯æ•è·ï¼Œå®ƒæä¾›äº†å¦ä¸€ä¸ªå‡½æ•°attachEventã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ele.attachEvent(<span class="string">"onclick"</span>, doSomething);</span><br></pre></td></tr></table></figure></p><p>äº‹ä»¶å†’æ³¡ï¼ˆçš„è¿‡ç¨‹ï¼‰ï¼šäº‹ä»¶ä»å‘ç”Ÿçš„ç›®æ ‡ï¼ˆevent.srcElement||event.targetï¼‰å¼€å§‹ï¼Œæ²¿ç€æ–‡æ¡£é€å±‚å‘ä¸Šå†’æ³¡ï¼Œåˆ°documentä¸ºæ­¢ã€‚</p><p>è‡³æ­¤æˆ‘ä»¬å¯ä»¥å°è£…ä¸€ä¸‹äº‹ä»¶ç»‘å®šçš„æ–¹æ³•ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//äº‹ä»¶ç»‘å®š</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addEvent</span>(<span class="params">target, type, func</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (target.addEventListener) &#123;</span><br><span class="line">    target.addEventListener(type, func, <span class="literal">false</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target.attachEvent) &#123;</span><br><span class="line">    target.attachEvent(<span class="string">'on'</span> + type, func);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    target[<span class="string">'on'</span> + type] = func;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//äº‹ä»¶ç§»é™¤</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeEvent</span>(<span class="params">target, type, func</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (target.removeEventListener) &#123;</span><br><span class="line">    target.removeEventListener(type, func, <span class="literal">false</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target.detachEvent) &#123;</span><br><span class="line">    target.detachEvent(<span class="string">'on'</span> + type, func);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    target[<span class="string">'on'</span> + type] = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="äº‹ä»¶çš„ä¼ æ’­æ˜¯å¯ä»¥é˜»æ­¢çš„ï¼š"><a href="#äº‹ä»¶çš„ä¼ æ’­æ˜¯å¯ä»¥é˜»æ­¢çš„ï¼š" class="headerlink" title="äº‹ä»¶çš„ä¼ æ’­æ˜¯å¯ä»¥é˜»æ­¢çš„ï¼š"></a>äº‹ä»¶çš„ä¼ æ’­æ˜¯å¯ä»¥é˜»æ­¢çš„ï¼š</h3><p>é˜»æ­¢äº‹ä»¶å†’æ³¡<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (event.stopPropagation) &#123;</span><br><span class="line">  event.stopPropagation();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  event.cancelBubble = <span class="literal">true</span>; <span class="comment">// å…¼å®¹IE</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸º<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (event.preventDefault) &#123;</span><br><span class="line">  event.preventDefault(); </span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  event.returnValue = <span class="literal">false</span>; <span class="comment">// å…¼å®¹IE</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="äº‹ä»¶ä»£ç†"><a href="#äº‹ä»¶ä»£ç†" class="headerlink" title="äº‹ä»¶ä»£ç†"></a>äº‹ä»¶ä»£ç†</h3><p>äº‹ä»¶å§”æ‰˜å°±æ˜¯åˆ©ç”¨äº‹ä»¶å†’æ³¡ï¼ŒåªæŒ‡å®šä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œå°±å¯ä»¥ç®¡ç†æŸä¸€ç±»å‹çš„æ‰€æœ‰äº‹ä»¶ã€‚æœ‰ç‚¹å°±æ˜¯å¯ä»¥æé«˜æ€§èƒ½ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">'ul'</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span>    </span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> oUl = <span class="built_in">document</span>.getElementById(<span class="string">'ul'</span>);</span></span><br><span class="line"><span class="javascript">    addEvent(oUl, <span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> ev = ev || <span class="built_in">window</span>.event;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> target = ev.target || ev.srcElement;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (targe.nodeName.toLowerCase() === <span class="string">'li'</span>) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(target.innerHTML);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="JSè§‚å¯Ÿè€…æ¨¡å¼"><a href="#JSè§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="JSè§‚å¯Ÿè€…æ¨¡å¼"></a>JSè§‚å¯Ÿè€…æ¨¡å¼</h3><p>è¿™æ˜¯ä¸€ç§åˆ›å»ºæ¾æ•£è€¦åˆä»£ç çš„æŠ€æœ¯ã€‚å®ƒå®šä¹‰å¯¹è±¡é—´ ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å°†å¾—åˆ°é€šçŸ¥ã€‚ç”±ä¸»ä½“å’Œè§‚å¯Ÿè€…ç»„æˆï¼Œä¸»ä½“è´Ÿè´£å‘å¸ƒäº‹ä»¶ï¼ŒåŒæ—¶è§‚å¯Ÿè€…é€šè¿‡è®¢é˜…è¿™äº›äº‹ä»¶æ¥è§‚å¯Ÿè¯¥ä¸»ä½“ã€‚ä¸»ä½“å¹¶ä¸çŸ¥é“è§‚å¯Ÿè€…çš„ä»»ä½•äº‹æƒ…ï¼Œè§‚å¯Ÿè€…çŸ¥é“ä¸»ä½“å¹¶èƒ½æ³¨å†Œäº‹ä»¶çš„å›è°ƒå‡½æ•°ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myEvent = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> handlers = &#123;&#125;;</span><br><span class="line">    </span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">on</span>(<span class="params">evt, func</span>) </span>&#123;</span><br><span class="line">        handlers[evt] = handlers[evt] || [];</span><br><span class="line">        handlers[evt].push(func);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">once</span>(<span class="params">evt, func</span>) </span>&#123;</span><br><span class="line">        handlers[evt] = [];</span><br><span class="line">        handlers[evt].push(func);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">off</span>(<span class="params">evt, func</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> handler = handlers[evt];</span><br><span class="line">        <span class="keyword">if</span> (handler) &#123;</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; handler.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (handler[i] === func) &#123;</span><br><span class="line">              handler.splice(i, <span class="number">1</span>);</span><br><span class="line">              <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">emit</span>(<span class="params">evt, arg</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (handlers[evt]) &#123;</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; handlers[evt].length; i++) &#123;</span><br><span class="line">            handlers[evt][i](arg);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        on: on,</span><br><span class="line">        once: once,</span><br><span class="line">        off: off,</span><br><span class="line">        emit: emit,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;)();</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;äº‹ä»¶å†’æ³¡ä¸æ•è·&quot;&gt;&lt;a href=&quot;#äº‹ä»¶å†’æ³¡ä¸æ•è·&quot; class=&quot;headerlink&quot; title=&quot;äº‹ä»¶å†’æ³¡ä¸æ•è·&quot;&gt;&lt;/a&gt;äº‹ä»¶å†’æ³¡ä¸æ•è·&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;å†’æ³¡å‹äº‹ä»¶ï¼šäº‹ä»¶æŒ‰ç…§ä»æœ€ç‰¹å®šçš„äº‹ä»¶ç›®æ ‡åˆ°æœ€ä¸ç‰¹å®šçš„äº‹ä»¶ç›®æ ‡(documentå¯¹è±¡)çš„é¡ºåºè§¦å‘ã€‚&lt;br&gt;IE 5.5: div -&amp;gt; body -&amp;gt; document&lt;br&gt;IE 6.0: div -&amp;gt; body -&amp;gt; html -&amp;gt; document&lt;br&gt;Mozilla 1.0: div -&amp;gt; body -&amp;gt; html -&amp;gt; document -&amp;gt; window&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æ•è·å‹äº‹ä»¶(event capturing)ï¼šäº‹ä»¶ä»æœ€ä¸ç²¾ç¡®çš„å¯¹è±¡(document å¯¹è±¡)å¼€å§‹è§¦å‘ï¼Œç„¶ååˆ°æœ€ç²¾ç¡®(ä¹Ÿå¯ä»¥åœ¨çª—å£çº§åˆ«æ•è·äº‹ä»¶ï¼Œä¸è¿‡å¿…é¡»ç”±å¼€å‘äººå‘˜ç‰¹åˆ«æŒ‡å®š)ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;DOMäº‹ä»¶æµï¼šåŒæ—¶æ”¯æŒä¸¤ç§äº‹ä»¶æ¨¡å‹ï¼šæ•è·å‹äº‹ä»¶å’Œå†’æ³¡å‹äº‹ä»¶ï¼Œä½†æ˜¯ï¼Œæ•è·å‹äº‹ä»¶å…ˆå‘ç”Ÿã€‚ä¸¤ç§äº‹ä»¶æµä¼šè§¦åŠDOMä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œä»documentå¯¹è±¡å¼€å§‹ï¼Œä¹Ÿåœ¨documentå¯¹è±¡ç»“æŸã€‚&lt;br&gt;DOMäº‹ä»¶æ¨¡å‹æœ€ç‹¬ç‰¹çš„æ€§è´¨æ˜¯ï¼Œæ–‡æœ¬èŠ‚ç‚¹ä¹Ÿè§¦å‘äº‹ä»¶(åœ¨IEä¸­ä¸ä¼š)ã€‚&lt;/li&gt;&lt;/ol&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://hero-guo.com/categories/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://hero-guo.com/tags/JavaScript/"/>
    
      <category term="äº‹ä»¶" scheme="http://hero-guo.com/tags/%E4%BA%8B%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>ç±»çš„ç»§æ‰¿</title>
    <link href="http://hero-guo.com/2017/02/12/object-prototype/"/>
    <id>http://hero-guo.com/2017/02/12/object-prototype/</id>
    <published>2017-02-12T06:57:15.000Z</published>
    <updated>2017-08-30T14:28:05.000Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p>æ··åˆå¤åˆ¶</p><pre><code>//å¤åˆ¶sourceå¯¹è±¡çš„å±æ€§function mixin(source, target) {    for (var key in source) {        if (!(key in target)) {            target[key] = source[key];        }    }    return target;}var Vehicle = {    engines: 1,    ignition: function() {        console.log(&quot; Turning on my forward! &quot;);    },    drive: function() {        this.ignition();        console.log(&quot; Steering and moving forward! &quot;);    }};//Carå¤åˆ¶Vehicleçš„å±æ€§å€¼å’Œå‡½æ•°å¼•ç”¨var Car = mixin(Vehicle, {    wheels: 4,    drive: function() {    //æ˜¾ç¤ºæŒ‡å®šVehicleå¯¹è±¡è°ƒç”¨dirveæ–¹æ³•    //å¦‚æœç›´æ¥æ‰§è¡ŒVehicle.dirve()ï¼Œå‡½æ•°è°ƒç”¨ä¸­çš„thiså°±ä¼šç»‘å®šåˆ°Vehicleä¸Šï¼Œæ‰€ä»¥ä½¿ç”¨.call(this)æ¥ç¡®ä¿dirveåœ¨Carå¯¹è±¡çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œ;    Vehicle.drive.call(this);        console.log(&quot; Rolling on all &quot; + this.wheels + &quot;wheels!&quot;);    }});Car.drive();</code></pre><a id="more"></a></li><li><p>å¯„ç”Ÿç»§æ‰¿<br> é¦–å…ˆå¤åˆ¶ä¸€ä»½çˆ¶ç±»ï¼ˆVehicleï¼‰ï¼Œç„¶åæ··å…¥å­ç±»ï¼ˆCarï¼‰ã€‚ç„¶åæ„å»ºå®ä¾‹ã€‚</p><pre><code>//ç±»function Vehicle() {    this.engines = 1;}Vehicle.prototype.ignition = function() {    console.log(&quot; Turning on my forward! &quot;);};Vehicle.prototype.drive = function() {    this.ignition();    console.log(&quot; Steering and moving forward! &quot;);};//å¯„ç”Ÿç±»Carfunction Car() {    //car æ˜¯ä¸€ä¸ªVehicle    var car = new Vehicle();    car.wheels = 4;    //ä¿å­˜Vehicle::drive()çš„ç‰¹æ®Šå¼•ç”¨    var vehDrive = car.drive;    //é‡å†™Vehicle::drive()    car.drive = function() {        vehDrive.call(this);        console.log(&quot; Rolling on all &quot; + this.wheels + &quot;wheels!&quot;);    }    return car;}// å› ä¸ºæ²¡ä½¿ç”¨newåˆ›å»ºçš„æ–°å¯¹è±¡è€Œæ˜¯ä½¿ç”¨è¿”å›çš„carï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥è°ƒç”¨Car();//var myCar = Car();var myCar = new Car();myCar.drive();</code></pre></li></ol><h3 id="åŸå‹ç»§æ‰¿"><a href="#åŸå‹ç»§æ‰¿" class="headerlink" title="åŸå‹ç»§æ‰¿"></a>åŸå‹ç»§æ‰¿</h3><pre><code>function Foo(name) {    this.name = name;}Foo.prototype.myName = function() {    return this.name;}function Bar(name, label) {    Foo.call(this, name);    this.label = label;}//Bar.prototype å…³è”åˆ° Foo.prototype//è°ƒç”¨Object.create()åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡å¹¶æŠŠå†…éƒ¨çš„[[prototype]]å…³è”åˆ°æŒ‡å®šçš„å¯¹è±¡ï¼ˆFoo.prototypeï¼‰//ES6ç›´æ¥ä¿®æ”¹ç°æœ‰çš„Bar.prototype  //Object.setPrototypeOf(Bar.prototype, Foo.prototype);Bar.prototype = Object.create(Foo.prototype);Bar.prototype.constructor = Bar;Bar.prototype.myLabel = function() {    return this.label;}var a = new Bar(&apos;a&apos;, &apos;obj a&apos;);</code></pre><p><code>Bar.prototype = Foo.prototype</code> å¹¶ä¸ä¼šåˆ›å»ºä¸€ä¸ªå…³è”åˆ°Bar.prototypeçš„æ–°å¯¹è±¡ï¼Œåªæ˜¯ç›´æ¥å¼•ç”¨Foo.prototypeå¯¹è±¡ã€‚å› æ­¤æ‰§è¡Œå¤åˆ¶è¯­å¥å¯èƒ½ä¼šä¿®æ”¹Foo.prototypeæœ¬èº«ã€‚<br><code>Bar.prototype = new Foo()</code>è™½ç„¶ä¼šåˆ›å»ºä¸€ä¸ªå…³è”åˆ°Bar.prototypeçš„æ–°å¯¹è±¡ï¼Œä½†æ˜¯ä»–ä½¿ç”¨çš„æ˜¯new Foo()æ„é€ å‡½æ•°è°ƒç”¨ï¼Œå¦‚æœFooå‡½æ•°æœ‰ä¸€äº›å‰¯ä½œç”¨å¯èƒ½ä¼šå½±å“åˆ°Bar()çš„åä»£ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;ol&gt;
&lt;li&gt;&lt;p&gt;æ··åˆå¤åˆ¶&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;//å¤åˆ¶sourceå¯¹è±¡çš„å±æ€§
function mixin(source, target) {
    for (var key in source) {
        if (!(key in target)) {
            target[key] = source[key];
        }
    }
    return target;
}

var Vehicle = {
    engines: 1,
    ignition: function() {
        console.log(&amp;quot; Turning on my forward! &amp;quot;);
    },
    drive: function() {
        this.ignition();
        console.log(&amp;quot; Steering and moving forward! &amp;quot;);
    }
};

//Carå¤åˆ¶Vehicleçš„å±æ€§å€¼å’Œå‡½æ•°å¼•ç”¨
var Car = mixin(Vehicle, {
    wheels: 4,
    drive: function() {
    //æ˜¾ç¤ºæŒ‡å®šVehicleå¯¹è±¡è°ƒç”¨dirveæ–¹æ³•
    //å¦‚æœç›´æ¥æ‰§è¡ŒVehicle.dirve()ï¼Œå‡½æ•°è°ƒç”¨ä¸­çš„thiså°±ä¼šç»‘å®šåˆ°Vehicleä¸Šï¼Œæ‰€ä»¥ä½¿ç”¨.call(this)æ¥ç¡®ä¿dirveåœ¨Carå¯¹è±¡çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œ;
    Vehicle.drive.call(this);
        console.log(&amp;quot; Rolling on all &amp;quot; + this.wheels + &amp;quot;wheels!&amp;quot;);
    }
});
Car.drive();
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;&lt;/ol&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://hero-guo.com/categories/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://hero-guo.com/tags/JavaScript/"/>
    
      <category term="ç»§æ‰¿" scheme="http://hero-guo.com/tags/%E7%BB%A7%E6%89%BF/"/>
    
  </entry>
  
  <entry>
    <title>å……åˆ†ç†è§£é—­åŒ…</title>
    <link href="http://hero-guo.com/2017/02/12/closure/"/>
    <id>http://hero-guo.com/2017/02/12/closure/</id>
    <published>2017-02-12T06:57:15.000Z</published>
    <updated>2017-08-30T15:35:30.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é—­åŒ…å®šä¹‰"><a href="#é—­åŒ…å®šä¹‰" class="headerlink" title="é—­åŒ…å®šä¹‰"></a>é—­åŒ…å®šä¹‰</h3><ul><li>å‡½æ•°å®šä¹‰æ—¶çš„ä½œç”¨åŸŸé“¾åˆ°å‡½æ•°æ‰§è¡Œæ—¶ä¾ç„¶æœ‰æ•ˆ</li><li>å‡½æ•°ä½“å†…éƒ¨åˆ°å˜é‡éƒ½å¯ä»¥ä¿å­˜åœ¨å‡½æ•°ä½œç”¨åŸŸå†…</li><li>é—­åŒ…å¯ä»¥è®¿é—®å®ƒè¢«åˆ›å»ºæ—¶å€™åˆ°ä¸Šä¸‹æ–‡ç¯å¢ƒ</li></ul><a id="more"></a><h3 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h3><p>ç”±äºé—­åŒ…æ˜¯åŸºäºè¯æ³•ä½œç”¨åŸŸä¹¦å†™ä»£ç æ—¶æ‰€äº§ç”Ÿåˆ°è‡ªç„¶ç»“æœï¼Œæ‰€ä»¥ä¸ºäº†ç†è§£é—­åŒ…ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä»€ä¹ˆæ˜¯è¯æ³•ä½œç”¨åŸŸã€‚</p><h5 id="ä»€ä¹ˆæ˜¯è¯æ³•ä½œç”¨åŸŸï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯è¯æ³•ä½œç”¨åŸŸï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯è¯æ³•ä½œç”¨åŸŸï¼Ÿ"></a>ä»€ä¹ˆæ˜¯è¯æ³•ä½œç”¨åŸŸï¼Ÿ</h5><p>å¤§éƒ¨åˆ†æ ‡å‡†è¯­è¨€ç¼–è¯‘å™¨åˆ°ç¬¬ä¸€ä¸ªå·¥ä½œé˜¶æ®µå«åšè¯æ³•åŒ–ã€‚ç®€å•çš„è¯´è¯æ³•ä½œç”¨åŸŸå°±æ˜¯å®šä¹‰åœ¨è¯æ³•é˜¶æ®µåˆ°ä½œç”¨åŸŸï¼ˆä¹Ÿå°±æ˜¯è¯´å‡½æ•°å£°æ˜çš„ä½ç½®ï¼‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> b = a * <span class="number">2</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">c</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a, b, c);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  bar(b * <span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line">foo(<span class="number">2</span>); <span class="comment">//=&gt; 2, 4, 12</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢åˆ°ä»£ç ä¸­æœ‰3ä¸ªé€çº§åµŒå¥—åˆ°ä½œç”¨åŸŸã€‚</p><ol><li>åŒ…å«ç€æ•´ä¸ªå…¨å±€ä½œç”¨åŸŸï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼š fooï¼›</li><li>åŒ…å«fooæ‰€åˆ›å»ºåˆ°ä½œç”¨åŸŸï¼Œå…¶ä¸­æœ‰ä¸‰ä¸ªæ ‡è¯†ç¬¦ï¼šaã€barã€bï¼›</li><li>åŒ…å«baræ‰€åˆ›å»ºåˆ°ä½œç”¨åŸŸï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼šcã€‚</li></ol><p>åœ¨å¼•æ“æ‰§è¡Œconsole.log(â€¦)å£°æ˜ï¼Œå¹¶æŸ¥æ‰¾aã€bã€cä¸‰ä¸ªå˜é‡åˆ°å¼•ç”¨æ—¶ã€‚é¦–å…ˆä»æœ€å†…éƒ¨åˆ°ä½œç”¨åŸŸä¹Ÿå°±æ˜¯bar()å‡½æ•°ä½œç”¨åŸŸå¼€å§‹æŸ¥æ‰¾ã€‚å¼•æ“æ— æ³•æ‰¾åˆ°aå°±ä¼šç»§ç»­å‘ä¸ŠæŸ¥æ‰¾ä¹Ÿå°±æ˜¯foo()å‡½æ•°ä½œç”¨åŸŸã€‚åœ¨è¿™é‡Œæ‰¾åˆ°æ¥aã€‚å¯¹äºbæ¥è®²ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚ä½œç”¨åŸŸæŸ¥æ‰¾ä¼šåœ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ ‡è¯†ç¬¦æ—¶åœæ­¢ã€‚</p><h5 id="é—­åŒ…çš„äº§ç”Ÿ"><a href="#é—­åŒ…çš„äº§ç”Ÿ" class="headerlink" title="é—­åŒ…çš„äº§ç”Ÿ"></a>é—­åŒ…çš„äº§ç”Ÿ</h5><p>å½“å‡½æ•°å¯ä»¥è®°ä½å¹¶è®¿é—®æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸæ—¶ï¼Œå°±äº§ç”Ÿäº†é—­åŒ…ï¼Œå³ä½¿å‡½æ•°æ˜¯åœ¨å½“å‰çš„è¯æ³•ä½œç”¨åŸŸä¹‹å¤–æ‰§è¡Œã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> bar;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> baz = foo();</span><br><span class="line">baz(); <span class="comment">// =&gt; 2   è¿™å°±æ˜¯é—­åŒ…</span></span><br></pre></td></tr></table></figure></p><p>å‡½æ•°barçš„è¯æ³•ä½œç”¨åŸŸèƒ½å¤Ÿè®¿é—®fooçš„å†…éƒ¨ä½œç”¨åŸŸã€‚ç„¶åæˆ‘ä»¬è¿”å›baræœ¬èº«ã€‚å½“fooæ‰§è¡Œåï¼Œå…¶è¿”å›å€¼ï¼ˆä¹Ÿå°±æ˜¯barå‡½æ•°ï¼‰èµ‹å€¼ç»™å˜é‡bazå¹¶è°ƒç”¨bazï¼Œå®é™…ä¸Šåªæ˜¯é€šè¿‡ä¸åŒçš„æ ‡è¯†ç¬¦å¼•ç”¨äº†å†…éƒ¨çš„å‡½æ•°barã€‚è™½ç„¶baræ˜¯åœ¨å®šä¹‰çš„è¯æ³•ä½œç”¨åŸŸä»¥å¤–è¢«è°ƒç”¨ï¼Œä½†æ˜¯é—­åŒ…å¯ä»¥è®¿é—®å®ƒè¢«åˆ›å»ºæ—¶å€™åˆ°ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œæ‰€ä»¥è¿˜æ˜¯å¯ä»¥è®¿é—®åˆ°å˜é‡aã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>åœ¨fooæ‰§è¡Œä¹‹åã€‚é€šå¸¸fooåˆ°æ•´ä¸ªå†…éƒ¨ä½œç”¨åŸŸéƒ½ä¼šè¢«é”€æ¯ï¼Œå› ä¸ºå¼•æ“æœ‰åƒåœ¾å›æ”¶æœºåˆ¶ç”¨æ¥é‡Šæ”¾ä¸åœ¨ä½¿ç”¨åˆ°å†…å­˜ç©ºé—´ã€‚ä½†æ˜¯å› ä¸ºbarå£°æ˜åœ¨fooçš„å†…éƒ¨ï¼Œå®ƒæ‹¥æœ‰æ¶µç›–fooå†…éƒ¨ä½œç”¨åŸŸçš„é—­åŒ…ï¼Œæ˜¯çš„è¯¥ä½œç”¨åŸŸä¸€ç›´å­˜åœ¨ï¼Œå¹¶è¢«baréšæ—¶å¼•ç”¨ã€‚</p><p>æ— è®ºä½¿ç”¨ä½•ç§æ–¹å¼å¯¹å‡½æ•°ç±»å‹çš„å€¼è¿›è¡Œä¼ é€’ï¼Œå½“å‡½æ•°åœ¨åˆ«å¤„è¢«è°ƒç”¨æ—¶éƒ½å¯ä»¥è§‚å¯Ÿåˆ°é—­åŒ…ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">baz</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">  &#125;</span><br><span class="line">  bar(baz);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  fn(); <span class="comment">//é—­åŒ…</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="éšå¤„å¯è§åˆ°é—­åŒ…"><a href="#éšå¤„å¯è§åˆ°é—­åŒ…" class="headerlink" title="éšå¤„å¯è§åˆ°é—­åŒ…"></a>éšå¤„å¯è§åˆ°é—­åŒ…</h5><p>ä½ å·²ç»å†™è¿‡åˆ°ä»£ç ä¸­ä¸€å®šåˆ°å¤„éƒ½æ˜¯é—­åŒ…åˆ°å½±å­ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">wait</span>(<span class="params">message</span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(message);</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line">wait(<span class="string">'Hello, closure'</span>);</span><br></pre></td></tr></table></figure></p><p>waitæ‰§è¡Œ1000æ¯«ç§’åï¼Œå®ƒåˆ°å†…éƒ¨ä½œç”¨åŸŸå¹¶ä¸ä¼šæ¶ˆå¤±ï¼Œtimerå‡½æ•°ä¾ç„¶å¯ä»¥è®¿é—®å®ƒå†…éƒ¨åˆ°å˜é‡messageã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setupBot</span>(<span class="params">name, selector</span>) </span>&#123;</span><br><span class="line">  $(selector).click(<span class="function"><span class="keyword">function</span> <span class="title">activator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Activating:'</span> + name);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">setupBot(<span class="string">'Closure Bot 1'</span>, <span class="string">'#bot1'</span>);</span><br></pre></td></tr></table></figure></p><p>æœ¬è´¨ä¸Šæ— è®ºä½•æ—¶ä½•åœ°ã€‚å¦‚æœå°†å‡½æ•°å½“ä½œç¬¬ä¸€çº§åˆ°å€¼ç±»å‹å¹¶åˆ°å¤„ä¼ é€’ï¼Œä½ å°±ä¼šçœ‹åˆ°é—­åŒ…äº†ã€‚</p><h5 id="å¾ªç¯å’Œé—­åŒ…"><a href="#å¾ªç¯å’Œé—­åŒ…" class="headerlink" title="å¾ªç¯å’Œé—­åŒ…"></a>å¾ªç¯å’Œé—­åŒ…</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;=<span class="number">5</span>; i++) &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;, i*<span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æœŸæœ›æ˜¯è¾“å‡º1ï½5ï¼Œæ¯ç§’ä¸€æ¬¡ï¼Œæ¯æ¬¡ä¸€ä¸ªã€‚ä½†æ˜¯å®é™…ä¸Šæ˜¯æ¯ç§’ä¸€æ¬¡è¾“å‡ºåˆ°éƒ½æ˜¯6ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>åŸæ¥å¾ªç¯ä¸­å®šä¹‰çš„å‡½æ•°éƒ½å…±äº«ä¸€ä¸ªå…¨å±€ä½œç”¨åŸŸï¼Œå› æ­¤å®é™…ä¸Šåªæœ‰ä¸€ä¸ªiã€‚å› æ­¤æˆ‘ä»¬éœ€è¦æ›´å¤šçš„é—­åŒ…ä½œç”¨åŸŸï¼Œç‰¹åˆ«æ˜¯å¾ªç¯è¿‡ç¨‹ä¸­æ¯ä¸ªè¿­ä»£éƒ½éœ€è¦ä¸€ä¸ªé—­åŒ…ä½œç”¨åŸŸã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;=<span class="number">5</span>; i++) &#123;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params">j</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(j)</span><br><span class="line">    &#125;, j*<span class="number">1000</span>)</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨letå¯ä»¥æœ‰æ›´ç®€å•éƒ½å†™æ³•<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">1</span>; i&lt;=<span class="number">5</span>; i++) &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;, i*<span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™æ˜¯å› ä¸ºletæ¯æ¬¡è¿­ä»£éƒ½ä¼šé‡æ–°å£°æ˜ä¸€ä¸ªä½œç”¨åŸŸã€‚</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p>ã€Šä½ ä¸çŸ¥é“çš„javascriptä¸Šã€‹</p><p>ã€Šjavascriptæƒå¨æŒ‡å—ã€‹</p><p>ã€Šjavascripté«˜çº§ç¨‹åºè®¾è®¡ã€‹</p><p>ã€Šjavascriptè¯­è¨€ç²¾ç²¹ã€‹</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;é—­åŒ…å®šä¹‰&quot;&gt;&lt;a href=&quot;#é—­åŒ…å®šä¹‰&quot; class=&quot;headerlink&quot; title=&quot;é—­åŒ…å®šä¹‰&quot;&gt;&lt;/a&gt;é—­åŒ…å®šä¹‰&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å‡½æ•°å®šä¹‰æ—¶çš„ä½œç”¨åŸŸé“¾åˆ°å‡½æ•°æ‰§è¡Œæ—¶ä¾ç„¶æœ‰æ•ˆ&lt;/li&gt;
&lt;li&gt;å‡½æ•°ä½“å†…éƒ¨åˆ°å˜é‡éƒ½å¯ä»¥ä¿å­˜åœ¨å‡½æ•°ä½œç”¨åŸŸå†…&lt;/li&gt;
&lt;li&gt;é—­åŒ…å¯ä»¥è®¿é—®å®ƒè¢«åˆ›å»ºæ—¶å€™åˆ°ä¸Šä¸‹æ–‡ç¯å¢ƒ&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Notes" scheme="http://hero-guo.com/categories/Notes/"/>
    
    
      <category term="JavaScript" scheme="http://hero-guo.com/tags/JavaScript/"/>
    
      <category term="é—­åŒ…" scheme="http://hero-guo.com/tags/%E9%97%AD%E5%8C%85/"/>
    
  </entry>
  
  <entry>
    <title>ES6-MIXIN</title>
    <link href="http://hero-guo.com/2016/12/11/ES6-mixin/"/>
    <id>http://hero-guo.com/2016/12/11/ES6-mixin/</id>
    <published>2016-12-11T06:57:15.000Z</published>
    <updated>2018-07-11T15:34:09.631Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//é€šè¿‡classå®ç°æ··å…¥</span></span><br><span class="line"><span class="comment">//extends å¯ä»¥ç»§æ‰¿åŠ¨æ€æ„é€ çš„ç±»</span></span><br><span class="line"><span class="keyword">const</span> Mixin = <span class="function"><span class="params">Sup</span> =&gt;</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">Sup</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="comment">//thiså…³é”®å­—åˆ™ä»£è¡¨å®ä¾‹å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">constructor</span>(...args) &#123;</span><br><span class="line">        <span class="comment">//ï¼ˆ1ï¼‰ä½œä¸ºå‡½æ•°è°ƒç”¨æ—¶ï¼ˆå³super(...args)ï¼‰ï¼Œsuperä»£è¡¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚</span></span><br><span class="line">        <span class="comment">//ï¼ˆ2ï¼‰ä½œä¸ºå¯¹è±¡è°ƒç”¨æ—¶ï¼ˆå³super.propæˆ–super.method()ï¼‰ï¼Œsuperä»£è¡¨çˆ¶ç±»ã€‚æ³¨æ„ï¼Œæ­¤æ—¶superå³å¯ä»¥å¼•ç”¨çˆ¶ç±»å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨çˆ¶ç±»çš„é™æ€æ–¹æ³•ã€‚</span></span><br><span class="line">        <span class="keyword">super</span>(...args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Widget</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(width, height, $elem) &#123;</span><br><span class="line">        <span class="built_in">Object</span>.assign(<span class="keyword">this</span>, &#123;</span><br><span class="line">            width,</span><br><span class="line">            height,</span><br><span class="line">            $elem: <span class="literal">null</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    render($where) &#123;</span><br><span class="line">         <span class="keyword">if</span> (<span class="keyword">this</span>.$elem) &#123;</span><br><span class="line">             <span class="keyword">this</span>.$elem.css(&#123;</span><br><span class="line">             width: <span class="keyword">this</span>.width + <span class="string">'px'</span>,</span><br><span class="line">             height: <span class="keyword">this</span>.height + <span class="string">'px'</span></span><br><span class="line">            &#125;).appendTo($where);</span><br><span class="line">          &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Button</span> <span class="keyword">extends</span> <span class="title">Mixin</span>(<span class="title">Widget</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(width, height, label)&#123;</span><br><span class="line">    <span class="keyword">super</span>(width, height);</span><br><span class="line">    <span class="keyword">this</span>.label = label;</span><br><span class="line">    <span class="keyword">this</span>.$elem = $(<span class="string">'&lt;button&gt;'</span>).text(<span class="keyword">this</span>.label);</span><br><span class="line">  &#125;</span><br><span class="line">  render($where) &#123;</span><br><span class="line">    <span class="keyword">super</span>.render($where);</span><br><span class="line">    <span class="keyword">this</span>.$elem.click(<span class="keyword">this</span>.onClick);</span><br><span class="line">  &#125;</span><br><span class="line">  onClick() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Button'</span> + <span class="keyword">this</span>.label + <span class="string">'clicked!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> $body = $(<span class="built_in">document</span>.body) || <span class="built_in">document</span>.body;</span><br><span class="line"><span class="keyword">let</span> btn = <span class="keyword">new</span> Button(<span class="number">125</span>, <span class="number">30</span>, <span class="string">'hello world'</span>);</span><br><span class="line">btn.render($body);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span 
      
    
    </summary>
    
      <category term="JavaScript" scheme="http://hero-guo.com/categories/JavaScript/"/>
    
    
      <category term="JavaScript" scheme="http://hero-guo.com/tags/JavaScript/"/>
    
      <category term="ES6" scheme="http://hero-guo.com/tags/ES6/"/>
    
  </entry>
  
</feed>
